{% extends "base.html" %}

{% block title %}SET Tool{% endblock %}
{% block content %}

<div class="container" style="padding:0px; margin:0px;max-width: none;">
    <div class="row justify-content-center">
        <div class="col-8">
            <div class="container">
                <div style="margin-left: 25px; padding-top: 10px;">
                    <h4 style="font-weight: 500; justify-content: center;">
                        SITE EMISSIONS TOOL
                    </h4>
                    <p style="padding-top: 10px; padding-bottom: 10px; color:#535353; font-weight: bold;" class="text-descr">This tool calculates the greenhouse gas emissions of managed wetland areas at both their baseline state of operations and after a proposed rewetting or restoration scheme.</p>
                    <div class="container disclm">
                        <p style="color:#5C93AC" class="text-descr">Disclaimer: The results calculated by this tool are not a guarantee. If you would like to learn about the logic behind our calculations, please see the <a class="textab" href="https://vb.nweurope.eu/projects/project-search/cconnects-carbon-connects/#tab-6" target="_blank">original</a> XLSM version of the tool and the <a class="textab" href="https://vb.nweurope.eu/media/12209/site-emissions-tool-v12-description.pdf" target="_blank">user manual</a>.</p>
                    </div>
                    <pre id="data_display"></pre>
                    <span><p style="color: red;" class="d-inline">*</p><p style="color: #989898;" class="d-inline"> denotes required field.</p></span>    
                </div>
                <div class="empty-spacing" style="padding-top: 15px;"></div>
                <form action="/settool" method="POST" id="set-form" enctype=multipart/form-data>
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <div class="container set-site-div">
                        <div class="row align-items-center">
                           <!---- <div class="col-7">
                                <button id="load_data_btn" class="btn btn-success">Load Data</button>
                                <p id="loading_status" style="color: blue; display: none;">Loading data...</p>
                                <label for="site_name" class="form-label tt-form-label">Site Name</label> 
                            </div> --> 
                            <div class="col-7">
                                {% if session.get('username') %}
                                <div class="dropdown">
                                    <button class="btn btn-primary dropdown-toggle" type="button" id="load_data_btn" data-bs-toggle="dropdown" aria-expanded="false">
                                        <i class="fas fa-database me-2"></i>Select Site
                                    </button>
                                    <ul class="dropdown-menu" aria-labelledby="load_data_btn">
                                        <li><h6 class="dropdown-header">Available Sites</h6></li>
                                        <li><a class="dropdown-item" href="#" data-site="site1">Site One</a></li>
                                        <li><a class="dropdown-item" href="#" data-site="site2">Site Two</a></li>
                                        <li><a class="dropdown-item" href="#" data-site="site3">Site Three</a></li>
                                        <li><hr class="dropdown-divider"></li>
                                        
                                    </ul>
                                </div>
                                {% endif %}
                                <p id="loading_status" style="color: #0d6efd; display: none;">
                                    <i class="fas fa-spinner fa-spin me-2"></i>Loading data...
                                </p>
                                <label for="site_name" class="form-label tt-form-label mt-2">Site Name</label>
                            </div>
                            <div class="col-5">
                                <input type="text" class="validate form-control" id="site_name" name="site_name" value="{{inpt['gen_site_data']['site_name']}}" onchange="set_calculation()" onkeyup="set_calculation()">
                            </div>
                        </div>
                        <hr class="inf">
                        <div class="row align-items-center">
                            <div class="col-8">
                                <label for="tot_area" class="form-label tt-form-label d-inline">Total area in ha.</label> 
                                <p style="color: red;" class="d-inline">*</p>
                            </div>
                            <div class="col-4">
                                <input type="number" class="validate form-control" id="tot_area" name="tot_area" min="0" max="9999" step="0.01" value="{{inpt['gen_site_data']['tot_area']}}" onchange="set_calculation()" onkeyup="set_calculation()" required>
                            </div>
                        </div>
                        <hr class="inf">
                        <div class="row align-items-center">
                            
                            <div class="col-7">
                                <svg height="20" width="16">
                                    <a data-bs-toggle="popover" tabindex="0" data-bs-trigger="focus" data-bs-placement="right" data-bs-content="Coordinates of site.">
                                        <image xlink:href="{{ url_for('static', filename='INFO-icon.png') }}" style="height:20px; width:16px"></image>
                                    </a>
                                </svg>
                                <label for="coords" class="form-label tt-form-label" style="margin-left: 4px;">Coordinates</label> 
                            </div>
                            <div class="col-5">
                                <input type="text" class="validate form-control" id="coords" name="coords" value="{{inpt['gen_site_data']['coords']}}" onchange="set_calculation()" onkeyup="set_calculation()">
                            </div>
                        </div>
                        <hr class="inf">
                        <div class="row align-items-center">
                            <div class="col-8">
                                <label for="elevation" class="form-label tt-form-label">Elevation (m)</label> 
                            </div>
                            <div class="col-4">
                                <input type="text" class="validate form-control" id="elevation" name="elevation" value="{{inpt['gen_site_data']['elevation']}}" onchange="set_calculation()" onkeyup="set_calculation()">
                            </div>
                        </div>
                        <hr class="inf">
                        <div class="row align-items-center">
                            <div class="col-7">
                                <svg height="20" width="16">
                                    <a data-bs-toggle="popover" tabindex="0" data-bs-trigger="focus" data-bs-placement="right" data-bs-html="true" 
                                    data-bs-content="Select the type of peat soil in your site.<br>
                                        - Sphagnum peat: formed in raised bog and blanket bog sites<br>
                                        - Herbaceous peat: includes most fen peats (reed, tall sedge, etc.)<br>
                                        - Woody peat: is formed in carr forests<br>
                                        - Brownmoss peat: is formed in moss dominated, base-rich fens<br>
                                        - Unknown: select this if you don't know the peat type<br>
                                        - Humified: select this if your peat does not contain any recognizable plant remains.">
                                        <image xlink:href="{{ url_for('static', filename='INFO-icon.png') }}" style="height:20px; width:16px"></image>
                                    </a>
                                </svg>
                                <label for="peat_type" class="form-label tt-form-label d-inline" style="margin-left: 4px;">Peat type</label> 
                                <p style="color: red;" class="d-inline">*</p>
                            </div>
                            <div class="col-5">
                                <select class="validate form-select" id="peat_type" name="peat_type" value="{{inpt['gen_site_data']['peat_type']}}" onchange="set_calculation()" onkeyup="set_calculation()">
                                    <!--<option selected>Select peat type</option>-->
                                    {% if inpt['gen_site_data']['peat_type'] == "Sphagnum" %}
                                        <option selected value="Sphagnum">Sphagnum</option>                            
                                    {%else%}
                                        <option value="Sphagnum">Sphagnum</option>                        
                                    {%endif%}
                                    {% if inpt['gen_site_data']['peat_type'] == "Herbaceous" %}
                                        <option selected value="Herbaceous">Herbaceous</option>
                                    {%else%}
                                        <option value="Herbaceous">Herbaceous</option>
                                    {%endif%}
                                    {% if inpt['gen_site_data']['peat_type'] == "Woody" %}
                                        <option selected value="Woody">Woody</option>
                                    {%else%}
                                        <option value="Woody">Woody</option>
                                    {%endif%}
                                    {% if inpt['gen_site_data']['peat_type'] == "Brown moss" %}
                                        <option selected value="Brown moss">Brown moss</option>
                                    {%else%}
                                        <option value="Brown moss">Brown moss</option>
                                    {%endif%}
                                    {% if inpt['gen_site_data']['peat_type'] == "Unknown" %}
                                        <option selected value="Unknown">Unknown</option>
                                    {%else%}
                                        <option value="Unknown">Unknown</option>
                                    {%endif%}
                                    {% if inpt['gen_site_data']['peat_type'] == "Humidified" %}
                                        <option selected value="Humidified">Humidified</option>
                                    {%else%}
                                        <option value="Humidified">Humidified</option>
                                    {%endif%}
                                </select>
                            </div>
                        </div>
                        <hr class="inf">
                        <div class="row align-items-center">
                            <div class="col-8">
                                <label for="peat_thick" class="form-label tt-form-label d-inline" style="margin-right:0px;">Peat thickness (cm)</label>
                            </div>
                            <div class="col-4">
                                <input type="number" class="validate form-control" id="peat_thick" name="peat_thick" min="0" max="9999" step="0.01" value="{{inpt['gen_site_data']['peat_thick']}}" onchange="set_calculation()" onkeyup="set_calculation()">
                            </div>
                        </div>
                        <hr class="inf">
                        <div class="row align-items-center justify-content-between">
                            <div class="col-8">
                                <label for="year_start" class="form-label tt-form-label">Year rewetting started</label> 
                            </div>
                            <div class="col-4">
                                <input type="number" class="validate form-control" id="year_start" name="year_start" min="1900" max="3000" value="{{inpt['gen_site_data']['year_start']}}" onchange="set_calculation()" onkeyup="set_calculation()">
                            </div>
                        </div>
                    </div>
                    <div class="empty-spacing" style="padding-top: 15px;"></div>
                    <div class="container set-base-div accordion" id="set-gw-div">
                        <div class="accordion-item set-accor-div">
                            <div id="set-gw-tog" class="accordion-header row d-flex justify-content-start">
                                <button class="accordion-button collapsed set-accor-btn" type="button" data-bs-toggle="collapse" data-bs-target="#set-gw-coll" aria-expanded="true" aria-controls="set-gw-coll">
                                    <div class="col set-header upper-base" style="padding-left: 0px;">
                                        <p>Groundwater and Vegetation</p>
                                    </div>
                                </button>
                            </div>
                            <div id="set-gw-coll" class="accordion-collapse collapse"  data-bs-parent="#set-gw-div">
                                <div class="accordion-body">
                                    <div class="empty-spacing" style="padding-top: 15px;"></div>
                                    <div class="upper-base">
                                        <p>Baseline</p>
                                        <hr>    
                                        <div class="row align-items-center">
                                            <div class="col-8">
                                                <svg height="20" width="16">
                                                    <a data-bs-toggle="popover" tabindex="0" data-bs-trigger="focus" data-bs-placement="right" data-bs-html="true" 
                                                    data-bs-content="Summer defined as 1 April - 30 September<br>
                                                        + is water level above the soil<br>
                                                        - is water level beneath the soil">
                                                        <image xlink:href="{{ url_for('static', filename='INFO-icon.png') }}" style="height:20px; width:16px"></image>
                                                    </a>
                                                </svg>
                                                <label for="bs_med_gw_level_summer" class="form-label tt-form-label d-inline" style="margin-right:0px; margin-left: 4px;">Median groundwater level in summer (cm)</label>
                                            </div>
                                            <div class="col-4">
                                                <input type="number" class="validate form-control" id="bs_med_gw_level_summer" name="bs_med_gw_level_summer" min="-999" max="999" step="0.001" value="{{inpt['base']['med_gw_level_summer']}}" onkeyup="set_calculation(); bs_set_veg_select()" onchange="set_calculation(); bs_set_veg_select()">
                                            </div>
                                        </div>
                                        <hr class="inf">
                                        <div class="row align-items-center">
                                            <div class="col-4">
                                                <svg height="20" width="16">
                                                    <a data-bs-toggle="popover" tabindex="0" data-bs-trigger="focus" data-bs-placement="right" data-bs-html="true" data-bs-content="This is the GESType. Select the best fit vegetation from the dropdown list after changing or confirming the groundwater level value.">
                                                        <image xlink:href="{{ url_for('static', filename='INFO-icon.png') }}" style="height:20px; width:16px"></image>
                                                    </a>
                                                </svg>
                                                <label for="bs_veg_class" class="form-label tt-form-label" style="margin-left: 4px;">Vegetation class *</label> 
                                            </div>
                                            <div class="col-8">
                                                <select class="validate form-select" id="bs_veg_class" name="bs_veg_class" onchange="set_calculation()" onkeyup="set_calculation()">
                                                    <!--populated with javascript-->
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="empty-spacing" style="padding-top: 15px;"></div>
                                    <div class="container set-rewet-div">
                                        <p>After Rewetting</p>
                                        <hr>
                                        <div class="row align-items-center">
                                            <div class="col-8">
                                                <svg height="20" width="16">
                                                    <a data-bs-toggle="popover" tabindex="0" data-bs-trigger="focus" data-bs-placement="right" data-bs-html="true" 
                                                    data-bs-content="Summer defined as 1 April - 30 September<br>
                                                        + is water level above the soil<br>
                                                        - is water level beneath the soil">
                                                        <image xlink:href="{{ url_for('static', filename='INFO-icon.png') }}" style="height:20px; width:16px"></image>                            
                                                    </a>
                                                </svg>
                                                <label for="rw_med_gw_level_summer" class="form-label tt-form-label" style="margin-left: 4px;">Median groundwater level in summer (cm)</label> 
                                            </div>
                                            <div class="col-4">
                                                <input type="number" class="validate form-control" id="rw_med_gw_level_summer" name="rw_med_gw_level_summer" min="-999" max="999" step="0.001" value="{{inpt['rewet']['med_gw_level_summer']}}" onkeyup="set_calculation(); rw_set_veg_select()" onchange="set_calculation(); rw_set_veg_select()">
                                            </div>
                                        </div>
                                        <hr class="inf">
                                        <div class="row align-items-center">
                                            <div class="col-4">
                                                <svg height="20" width="16">
                                                    <a data-bs-toggle="popover" tabindex="0" data-bs-trigger="focus" data-bs-placement="right" data-bs-html="true" data-bs-content="This is the GESType. Select the best fit vegetation from the dropdown list after changing or confirming the groundwater level value.">
                                                        <image xlink:href="{{ url_for('static', filename='INFO-icon.png') }}" style="height:20px; width:16px"></image>                            
                                                    </a>
                                                </svg>
                                                <label for="rw_veg_class" class="form-label tt-form-label" style="margin-left: 4px;">Vegetation class *</label> 
                                            </div>
                                            <div class="col-8">
                                                <select class="validate form-select" id="rw_veg_class" name="rw_veg_class" onchange="set_calculation()" onkeyup="set_calculation()">
                                                    <!--populated with javascript-->
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <p style="margin-top: 10px; margin-left: 20px; color: #4d4d4d; font-size: 14px;">* Change groundwater level to see more vegetation class options.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="empty-spacing" style="padding-top: 15px;"></div>
                    <div class="container set-base-div accordion" id="set-fu-div">
                        <div class="accordion-item set-accor-div">
                            <div id="set-fu-tog" class="accordion-header row d-flex justify-content-start">
                                <button class="accordion-button collapsed set-accor-btn" type="button" data-bs-toggle="collapse" data-bs-target="#set-fu-coll" aria-expanded="true" aria-controls="set-fu-coll">
                                    <div class="col set-header upper-base" style="padding-left: 0px;">
                                        <p>Fertiliser Use</p>
                                    </div>
                                </button>
                            </div>
                            <div id="set-fu-coll" class="accordion-collapse collapse" data-bs-parent="#set-fu-div">
                                <div class="accordion-body">
                                    <div class="empty-spacing" style="padding-top: 15px;"></div>
                                    <div class="upper-base">
                                        <p>Baseline</p>
                                        <hr>
                                        <div class="row align-items-center">
                                            <div class="col-8">
                                                <svg height="20" width="16">
                                                    <a data-bs-toggle="popover" tabindex="0" data-bs-trigger="focus" data-bs-placement="right" data-bs-content="Fill in the nitrogen (N) content of the total yearly application.">
                                                        <image xlink:href="{{ url_for('static', filename='INFO-icon.png') }}" style="height:20px; width:16px"></image>                            
                                                    </a>
                                                </svg>
                                                <label for="bs_amount_manure" class="form-label tt-form-label" style="margin-left: 4px;">Animal manure applied (k N/h)</label> 
                                            </div>
                                            <div class="col-4">
                                                <input type="number" class="validate form-control" id="bs_amount_manure" name="bs_amount_manure" min="0" max="9999" step="0.01" value="{{inpt['base']['amount_manure']}}" onchange="set_calculation()" onkeyup="set_calculation()">
                                            </div>
                                        </div>
                                        <hr class="inf">
                                        <div class="row align-items-center">
                                            <div class="col-8">
                                                <svg height="20" width="16">
                                                    <a data-bs-toggle="popover" tabindex="0" data-bs-trigger="focus" data-bs-placement="right" data-bs-content="Fill in the nitrogen (N) content of the total yearly application.">
                                                        <image xlink:href="{{ url_for('static', filename='INFO-icon.png') }}" style="height:20px; width:16px"></image>                            
                                                    </a>
                                                </svg>
                                                <label for="bs_amount_org_fert" class="form-label tt-form-label" style="margin-left: 4px;">Organic fertiliser applied (k N/h)</label> 
                                            </div>
                                            <div class="col-4">
                                                <input type="number" class="validate form-control" id="bs_amount_org_fert" name="bs_amount_org_fert" min="0" max="9999" step="0.01" value="{{inpt['base']['amount_org_fert']}}" onchange="set_calculation()" onkeyup="set_calculation()">
                                            </div>
                                        </div>
                                        <hr class="inf">
                                        <div class="row align-items-center">
                                            <div class="col-7">
                                                <label for="bs_type_synth_fert" class="form-label tt-form-label">Synthetic fertiliser</label> 
                                            </div>
                                            <div class="col-5">
                                                <select class="validate form-select" id="bs_type_synth_fert" name="bs_type_synth_fert" onchange="set_calculation()" onkeyup="set_calculation()">
                                                    {% if inpt['base']['type_synth_fert'][0] == "N" %}
                                                        <option selected value="Nitrate Based">Nitrate based</option>                         
                                                    {%else%}
                                                        <option value="Nitrate Based">Nitrate based</option>                      
                                                    {%endif%}
                                                    {% if inpt['base']['type_synth_fert'][0] == "A" %}
                                                        <option selected value="Ammonium Based">Ammonium based</option>
                                                    {%else%}
                                                        <option value="Ammonium Based">Ammonium based</option>
                                                    {%endif%}
                                                </select>
                                            </div>
                                        </div>
                                        <hr class="inf">
                                        <div class="row align-items-center">
                                            <div class="col-8">
                                                <label for="bs_amount_synth_fert" class="form-label tt-form-label">Amount applied (k N/h)</label> 
                                            </div>
                                            <div class="col-4">
                                                <input type="number" class="validate form-control" id="bs_amount_synth_fert" name="bs_amount_synth_fert" min="0" max="9999" step="0.01" value="{{inpt['base']['amount_synth_fert']}}" onchange="set_calculation()" onkeyup="set_calculation()">
                                            </div>
                                        </div>
                                        <hr class="inf">
                                        <div class="row align-items-center">
                                            <div class="col-8">
                                                <label for="bs_type_animals" class="form-label tt-form-label">Grazing animals</label> 
                                            </div>
                                            <div class="col-4">
                                                <select class="validate form-select" id="bs_type_animals" name="bs_type_animals" onchange="set_calculation()" onkeyup="set_calculation()">
                                                    {% if inpt['base']['type_animals'][0] == "N" %}
                                                        <option selected value="No Animals">No animal</option>
                                                    {%else%}
                                                        <option value="No Animals">No animal</option>
                                                    {%endif%}
                                                    {% if inpt['base']['type_animals'][0] == "D" %}
                                                        <option selected value="Dairy Cattle">Dairy cows</option>
                                                    {%else%}
                                                        <option value="Dairy Cattle">Dairy cows</option>
                                                    {%endif%}
                                                    {% if inpt['base']['type_animals'][0] == "B" %}
                                                        <option selected value="Beef Cattle">Beef cattle</option>
                                                    {%else%}
                                                        <option value="Beef Cattle">Beef cattle</option>
                                                    {%endif%}
                                                    {% if inpt['base']['type_animals'][0] == "S" %}
                                                        <option selected value="Sheep">Sheep</option>
                                                    {%else%}
                                                        <option value="Sheep">Sheep</option>
                                                    {%endif%}
                                                    {% if inpt['base']['type_animals'][0] == "G" %}
                                                        <option selected value="Goats">Goats</option>
                                                    {%else%}
                                                        <option value="Goats">Goats</option>
                                                    {%endif%}
                                                    {% if inpt['base']['type_animals'][0] == "W" %}
                                                        <option selected value="Water Buffalo">Water buffalo</option>
                                                    {%else%}
                                                        <option value="Water Buffalo">Water buffalo</option>
                                                    {%endif%}
                                                </select>
                                            </div>
                                        </div>
                                        <hr class="inf">
                                        <div class="row align-items-center">
                                            <div class="col-8">
                                                <label for="bs_avg_num_animals" class="form-label tt-form-label">Avergage number of grazing animals</label> 
                                            </div>
                                            <div class="col-4">
                                                <input type="number" class="validate form-control" id="bs_avg_num_animals" name="bs_avg_num_animals" min="0" max="9999" step="0.01" value="{{inpt['base']['avg_num_animals']}}" onchange="set_calculation()" onkeyup="set_calculation()">
                                            </div>
                                        </div>
                                        <hr class="inf">
                                        <div class="row align-items-center">
                                            <div class="col-8">
                                                <label for="bs_avg_num_days" class="form-label tt-form-label">Average grazing days per year</label> 
                                            </div>
                                            <div class="col-4">
                                                <input type="number" class="validate form-control" id="bs_avg_num_days" name="bs_avg_num_days" min="0" max="9999" step="0.01" value="{{inpt['base']['avg_num_days']}}" onchange="set_calculation()" onkeyup="set_calculation()">
                                            </div>
                                        </div>
                                        <hr class="inf">
                                        <div class="row align-items-center">
                                            <div class="col-8">
                                                <label for="bs_crop_yield" class="form-label tt-form-label">Crop yield (ton dm/ha/yr)</label> 
                                            </div>
                                            <div class="col-4">
                                                <input type="number" class="validate form-control" id="bs_crop_yield" name="bs_crop_yield" min="0" max="9999" step="0.01" value="{{inpt['base']['crop_yield']}}" onchange="set_calculation()" onkeyup="set_calculation()">
                                            </div>
                                        </div>
                                        <hr class="inf">
                                        <div class="form-check form-switch" style="display: grid;">
                                            <div class="row align-items-center justify-content-center">
                                                <div class="col-8">
                                                    <label for="bs_crop_resid" class="form-check-label tt-form-check-label">Crop residues</label>
                                                </div><div class="col-4 d-flex justify-content-center" style="justify-content: center;">
                                                    {% if inpt['base']['crop_resid'] %}
                                                    <input type="checkbox" class="form-check-input" role="switch" id="bs_crop_resid" name="bs_crop_resid" onchange="set_calculation()" onkeyup="set_calculation()" checked>
                                                    {%else%}
                                                    <input type="checkbox" class="form-check-input" role="switch" id="bs_crop_resid" name="bs_crop_resid" onchange="set_calculation()" onkeyup="set_calculation()">
                                                    {%endif%}
                                                </div>
                                            </div>
                                        </div>
                                        <hr class="inf">
                                        <div class="row align-items-center">
                                            <div class="col-6">
                                                <label for="bs_crop_name" class="form-label tt-form-label">Crop</label> 
                                            </div>
                                            <div class="col-6">
                                                <select class="validate form-select" id="bs_crop_name" name="bs_crop_name" onchange="set_calculation()" onkeyup="set_calculation()">
                                                    {% if inpt['base']['crop_name'][0] == "C" %}
                                                        <option selected value="Cattail (Typha Sp.)">Cattail (Typha sp.)</option>
                                                    {%else%}
                                                        <option value="Cattail (Typha Sp.)">Cattail (Typha sp.)</option>
                                                    {%endif%}
                                                    {% if inpt['base']['crop_name'][0] == "R" %}
                                                        <option selected value="Reed (Phragmites Australis)">Reed (Phragmites australis)</option>
                                                    {%else%}
                                                        <option value="Reed (Phragmites Australis)">Reed (Phragmites australis)</option>
                                                    {%endif%}
                                                    {% if inpt['base']['crop_name'][0] == "P" %}
                                                        <option selected value="Peat Moss (Sphagnum Sp.)">Peat moss (Sphagnum sp.)</option>
                                                    {%else%}
                                                        <option value="Peat Moss (Sphagnum Sp.)">Peat moss (Sphagnum sp.)</option>
                                                    {%endif%}
                                                    {% if inpt['base']['crop_name'][0] == "G" %}
                                                        <option selected value="Grasses like Reed Canary Grass">Grasses like reed canary grass</option>
                                                    {%else%}
                                                        <option value="Grasses like Reed Canary Grass">Grasses like reed canary grass</option>
                                                    {%endif%}
                                                    {% if inpt['base']['crop_name'][0] == "A" %}
                                                        <option selected value="Alder (Alnus Sp.)">Alder (Alnus sp.)</option>
                                                    {%else%}
                                                        <option value="Alder (Alnus Sp.)">Alder (Alnus sp.)</option>
                                                    {%endif%}
                                                    {% if inpt['base']['crop_name'][0] == "O" %}
                                                        <option selected value="Other">Other</option>
                                                    {%else%}
                                                        <option value="Other">Other</option>
                                                    {%endif%}
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="empty-spacing" style="padding-top: 15px;"></div>
                                    <div class="container set-rewet-div">
                                        <p>After Rewetting</p>
                                        <hr>
                                        <div class="row align-items-center">
                                            <div class="col-8">
                                                <svg height="20" width="16">
                                                    <a data-bs-toggle="popover" tabindex="0" data-bs-trigger="focus" data-bs-placement="right" data-bs-content="Fill in the nitrogen (N) content of the total yearly application.">
                                                        <image xlink:href="{{ url_for('static', filename='INFO-icon.png') }}" style="height:20px; width:16px"></image>                            
                                                    </a>
                                                </svg>
                                                <label for="rw_amount_manure" class="form-label tt-form-label" style="margin-left: 4px;">Animal manure applied (k N/h)</label> 
                                            </div>
                                            <div class="col-4">
                                                <input type="number" class="validate form-control" id="rw_amount_manure" name="rw_amount_manure" min="0" max="9999" step="0.01" value="{{inpt['rewet']['amount_manure']}}" onchange="set_calculation()" onkeyup="set_calculation()">
                                            </div>
                                        </div>
                                        <hr class="inf">
                                        <div class="row align-items-center">
                                            <div class="col-8">
                                                <svg height="20" width="16">
                                                    <a data-bs-toggle="popover" tabindex="0" data-bs-trigger="focus" data-bs-placement="right" data-bs-content="Fill in the nitrogen (N) content of the total yearly application.">
                                                        <image xlink:href="{{ url_for('static', filename='INFO-icon.png') }}" style="height:20px; width:16px"></image>                            
                                                    </a>
                                                </svg>
                                                <label for="rw_amount_org_fert" class="form-label tt-form-label" style="margin-left: 4px;">Organic fertiliser applied (k N/h)</label> 
                                            </div>
                                            <div class="col-4">
                                                <input type="number" class="validate form-control" id="rw_amount_org_fert" name="rw_amount_org_fert" min="0" max="9999" step="0.01" value="{{inpt['rewet']['amount_org_fert']}}" onchange="set_calculation()" onkeyup="set_calculation()">
                                            </div>
                                        </div>
                                        <hr class="inf">
                                        <div class="row align-items-center">
                                            <div class="col-7">
                                                <label for="rw_type_synth_fert" class="form-label tt-form-label">Synthetic fertiliser</label> 
                                            </div>
                                            <div class="col-5">
                                                <select class="validate form-select" id="rw_type_synth_fert" name="rw_type_synth_fert" onchange="set_calculation()" onkeyup="set_calculation()">
                                                    {% if inpt['rewet']['type_synth_fert'][0] == "N" %}
                                                        <option selected value="Nitrate Based">Nitrate based</option>                         
                                                    {%else%}
                                                        <option value="Nitrate Based">Nitrate based</option>                      
                                                    {%endif%}
                                                    {% if inpt['rewet']['type_synth_fert'][0] == "A" %}
                                                        <option  selected value="Ammonium Based">Ammonium based</option>
                                                    {%else%}
                                                        <option value="Ammonium Based">Ammonium based</option>
                                                    {%endif%}
                                                </select>
                                            </div>
                                        </div>
                                        <hr class="inf">
                                        <div class="row align-items-center">
                                            <div class="col-8">
                                                <label for="rw_amount_synth_fert" class="form-label tt-form-label">Amount applied (k N/h)</label> 
                                            </div>
                                            <div class="col-4">
                                                <input type="number" class="validate form-control" id="rw_amount_synth_fert" name="rw_amount_synth_fert" min="0" max="9999" step="0.01" value="{{inpt['rewet']['amount_synth_fert']}}" onchange="set_calculation()" onkeyup="set_calculation()">
                                            </div>
                                        </div>
                                        <hr class="inf">
                                        <div class="row align-items-center">
                                            <div class="col-8">
                                                <label for="rw_type_animals" class="form-label tt-form-label">Grazing animals</label> 
                                            </div>
                                            <div class="col-4">
                                                <select class="validate form-select" id="rw_type_animals" name="rw_type_animals" onchange="set_calculation()" onkeyup="set_calculation()">
                                                    {% if inpt['rewet']['type_animals'][0] == "N" %}
                                                        <option selected value="No Animals">No animal</option>
                                                    {%else%}
                                                        <option value="No Animals">No animal</option>
                                                    {%endif%}
                                                    {% if inpt['rewet']['type_animals'][0] == "D" %}
                                                        <option selected value="Dairy Cattle">Dairy cows</option>
                                                    {%else%}
                                                        <option value="Dairy Cattle">Dairy cows</option>
                                                    {%endif%}
                                                    {% if inpt['rewet']['type_animals'][0] == "B" %}
                                                        <option selected value="Beef Cattle">Beef cattle</option>
                                                    {%else%}
                                                        <option value="Beef Cattle">Beef cattle</option>
                                                    {%endif%}
                                                    {% if inpt['rewet']['type_animals'][0] == "S" %}
                                                        <option selected value="Sheep">Sheep</option>
                                                    {%else%}
                                                        <option value="Sheep">Sheep</option>
                                                    {%endif%}
                                                    {% if inpt['rewet']['type_animals'][0] == "G" %}
                                                        <option selected value="Goats">Goats</option>
                                                    {%else%}
                                                        <option value="Goats">Goats</option>
                                                    {%endif%}
                                                    {% if inpt['rewet']['type_animals'][0] == "W" %}
                                                        <option selected value="Water Buffalo">Water buffalo</option>
                                                    {%else%}
                                                        <option value="Water Buffalo">Water buffalo</option>
                                                    {%endif%}
                                                </select>
                                            </div>
                                        </div>
                                        <hr class="inf">
                                        <div class="row align-items-center">
                                            <div class="col-8">
                                                <label for="rw_avg_num_animals" class="form-label tt-form-label">Avergage number of grazing animals</label> 
                                            </div>
                                            <div class="col-4">
                                                <input type="number" class="validate form-control" id="rw_avg_num_animals" name="rw_avg_num_animals" min="0" max="9999" step="0.01" value="{{inpt['rewet']['avg_num_animals']}}" onchange="set_calculation()" onkeyup="set_calculation()">
                                            </div>
                                        </div>
                                        <hr class="inf">
                                        <div class="row align-items-center">
                                            <div class="col-8">
                                                <label for="rw_avg_num_days" class="form-label tt-form-label">Average grazing days per year</label> 
                                            </div>
                                            <div class="col-4">
                                                <input type="number" class="validate form-control" id="rw_avg_num_days" name="rw_avg_num_days" min="0" max="9999" step="0.01" value="{{inpt['rewet']['avg_num_days']}}" onchange="set_calculation()" onkeyup="set_calculation()">
                                            </div>
                                        </div>
                                        <hr class="inf">
                                        <div class="row align-items-center">
                                            <div class="col-8">
                                                <label for="rw_crop_yield" class="form-label tt-form-label">Crop yield (ton dm/ha/yr)</label> 
                                            </div>
                                            <div class="col-4">
                                                <input type="number" class="validate form-control" id="rw_crop_yield" name="rw_crop_yield" min="0" max="9999" step="0.01" value="{{inpt['rewet']['crop_yield']}}" onchange="set_calculation()" onkeyup="set_calculation()">
                                            </div>
                                        </div>
                                        <hr class="inf">
                                        <div class="form-check form-switch" style="display: grid;">
                                            <div class="row align-items-center justify-content-center">
                                                <div class="col-8">
                                                    <label for="rw_crop_resid" class="form-check-label tt-form-check-label">Crop residues</label>
                                                </div><div class="col-4 d-flex justify-content-center" style="justify-content: center;">
                                                    {% if inpt['rewet']['crop_resid'] %}
                                                    <input type="checkbox" class="form-check-input" role="switch" id="rw_crop_resid" name="rw_crop_resid" onchange="set_calculation()" onkeyup="set_calculation()" checked>
                                                    {%else%}
                                                    <input type="checkbox" class="form-check-input" role="switch" id="rw_crop_resid" name="rw_crop_resid" onchange="set_calculation()" onkeyup="set_calculation()">
                                                    {%endif%}
                                                </div>
                                            </div>
                                        </div>
                                        <hr class="inf">
                                        <div class="row align-items-center">
                                            <div class="col-6">
                                                <label for="rw_crop_name" class="form-label tt-form-label">Crop</label> 
                                            </div>
                                            <div class="col-6">
                                                <select class="validate form-select" id="rw_crop_name" name="rw_crop_name" onchange="set_calculation()" onkeyup="set_calculation()">
                                                    {% if inpt['rewet']['crop_name'][0] == "C" %}
                                                        <option selected value="Cattail (Typha Sp.)">Cattail (Typha sp.)</option>
                                                    {%else%}
                                                        <option value="Cattail (Typha Sp.)">Cattail (Typha sp.)</option>
                                                    {%endif%}
                                                    {% if inpt['rewet']['crop_name'][0] == "R" %}
                                                        <option selected value="Reed (Phragmites Australis)">Reed (Phragmites australis)</option>
                                                    {%else%}
                                                        <option value="Reed (Phragmites Australis)">Reed (Phragmites australis)</option>
                                                    {%endif%}
                                                    {% if inpt['rewet']['crop_name'][0] == "P" %}
                                                        <option selected value="Peat Moss (Sphagnum Sp.)">Peat moss (Sphagnum sp.)</option>
                                                    {%else%}
                                                        <option value="Peat Moss (Sphagnum Sp.)">Peat moss (Sphagnum sp.)</option>
                                                    {%endif%}
                                                    {% if inpt['rewet']['crop_name'][0] == "G" %}
                                                        <option selected value="Grasses like Reed Canary Grass">Grasses like reed canary grass</option>
                                                    {%else%}
                                                        <option value="Grasses like Reed Canary Grass">Grasses like reed canary grass</option>
                                                    {%endif%}
                                                    {% if inpt['rewet']['crop_name'][0] == "A" %}
                                                        <option selected value="Alder (Alnus Sp.)">Alder (Alnus sp.)</option>
                                                    {%else%}
                                                        <option value="Alder (Alnus Sp.)">Alder (Alnus sp.)</option>
                                                    {%endif%}
                                                    {% if inpt['rewet']['crop_name'][0] == "O" %}
                                                        <option selected value="Other">Other</option>
                                                    {%else%}
                                                        <option value="Other">Other</option>
                                                    {%endif%}
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="empty-spacing" style="padding-top: 15px;"></div>
                    <div class="container set-base-div accordion" id="set-land-div">
                        <div class="accordion-item set-accor-div">
                            <div id="set-land-tog" class="accordion-header row d-flex justify-content-start">
                                <button class="accordion-button collapsed set-accor-btn" type="button" data-bs-toggle="collapse" data-bs-target="#set-land-coll" aria-expanded="true" aria-controls="set-land-coll">
                                    <div class="col set-header upper-base" style="padding-left: 0px;">
                                        <p>Land Management Activity</p>
                                    </div>
                                </button>
                            </div>
                            <div class="set-land-coll accordion-collapse collapse" id="set-land-coll" data-bs-parent="#set-land-div">
                                <div class="accordion-body">
                                    <div class="empty-spacing" style="padding-top: 15px;"></div>
                                    <div class="upper-base">
                                        <p>Baseline</p>
                                        <hr>
                                        <div class="row align-items-center">
                                            <div class="col-8">
                                                <svg height="20" width="16">
                                                    <a data-bs-toggle="popover" tabindex="0" data-bs-trigger="focus" data-bs-placement="right" data-bs-html="true" 
                                                    data-bs-content=
                                                    "Estimate the diesel use of all activities.<br>
                                                    If you don't know the diesel use you can calculate this:<br>
                                                    Multiply the horse power of the tractor/ machine in kW and multiply that with 0.305 (l/kW). Multiply that with the time required to do the activity. If the activity includes tillage multiply by 1.5.<br>
                                                    <br>
                                                    Example cultivator:<br>
                                                    110kW* 0.305 l/kW*0.75 hours/ha*1.5(correction factor tillage)= 37.7 l/ha<br>
                                                    <br>
                                                    Example mowing:<br>
                                                    80 kW * 0.305 l/kW *0.5 hours/ha = 12.2 l/ha<br>
                                                    <br>
                                                    Total is the sum of all activities: 49.9 l/ha<br>
                                                    Multiply with the site area to determine the total for the site.">
                                                        <image xlink:href="{{ url_for('static', filename='INFO-icon.png') }}" style="height:20px; width:16px"></image>                            
                                                    </a>
                                                </svg>
                                                <label for="bs_diesel_per_site" class="form-label tt-form-label" style="margin-left: 4px;">Diesel Use</label> 
                                            </div>
                                            <div class="col-4">
                                                <input type="number" class="validate form-control" id="bs_diesel_per_site" name="bs_diesel_per_site" min="0" max="9999" step="0.01" value="{{inpt['base']['diesel_per_site']}}" onchange="set_calculation()" onkeyup="set_calculation()">
                                            </div>
                                        </div>
                                        <hr class="inf">
                                        <div class="row align-items-center">
                                            <div class="col-8">
                                                <svg height="20" width="16">
                                                    <a data-bs-toggle="popover" tabindex="0" data-bs-trigger="focus" data-bs-placement="right" data-bs-html="true" 
                                                    data-bs-content=
                                                        "Estimate the yearly electricity use of all electric equipment that uses power from the electricity grid, such as water pumping stations.<br>
                                                        <br>
                                                        If the equipment uses power from solar panels, windmills or other renewable sources do not fill this in here. In this case you need to determine the GHG-emission from electricity use separately and add this to the output calculated by the SET.">
                                                        <image xlink:href="{{ url_for('static', filename='INFO-icon.png') }}" style="height:20px; width:16px"></image>                            
                                                    </a>
                                                </svg>
                                                <label for="bs_elec_per_site" class="form-label tt-form-label" style="margin-left: 4px;">Electricity Use (kW)</label> 
                                            </div>
                                            <div class="col-4">
                                                <input type="number" class="validate form-control" id="bs_elec_per_site" name="bs_elec_per_site" min="0" max="9999" step="0.01" value="{{inpt['base']['elec_per_site']}}" onchange="set_calculation()" onkeyup="set_calculation()">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="empty-spacing" style="padding-top: 15px;"></div>
                                    <div class="container set-rewet-div">
                                        <p>After Rewetting</p>
                                        <hr>
                                        <div class="row align-items-center">
                                            <div class="col-8">
                                                <svg height="20" width="16">
                                                    <a data-bs-toggle="popover" tabindex="0" data-bs-trigger="focus" data-bs-placement="right" data-bs-html="true" 
                                                    data-bs-content=
                                                    "Estimate the diesel use of all activities.<br>
                                                    If you don't know the diesel use you can calculate this:<br>
                                                    Multiply the horse power of the tractor/ machine in kW and multiply that with 0.305 (l/kW). Multiply that with the time required to do the activity. If the activity includes tillage multiply by 1.5.<br>
                                                    <br>
                                                    Example cultivator:<br>
                                                    110kW* 0.305 l/kW*0.75 hours/ha*1.5(correction factor tillage)= 37.7 l/ha<br>
                                                    <br>
                                                    Example mowing:<br>
                                                    80 kW * 0.305 l/kW *0.5 hours/ha = 12.2 l/ha<br>
                                                    <br>
                                                    Total is the sum of all activities: 49.9 l/ha<br>
                                                    Multiply with the site area to determine the total for the site.">
                                                        <image xlink:href="{{ url_for('static', filename='INFO-icon.png') }}" style="height:20px; width:16px"></image>                            
                                                    </a>
                                                </svg>
                                                <label for="rw_diesel_per_site" class="form-label tt-form-label" style="margin-left: 4px;">Diesel Use</label> 
                                            </div>
                                            <div class="col-4">
                                                <input type="number" class="validate form-control" id="rw_diesel_per_site" name="rw_diesel_per_site" min="0" max="9999" step="0.01" value="{{inpt['rewet']['diesel_per_site']}}" onchange="set_calculation()" onkeyup="set_calculation()">
                                            </div>
                                        </div>
                                        <hr class="inf">
                                        <div class="row align-items-center">
                                            <div class="col-8">
                                                <svg height="20" width="16">
                                                    <a data-bs-toggle="popover" tabindex="0" data-bs-trigger="focus" data-bs-placement="right" data-bs-html="true" 
                                                    data-bs-content=
                                                        "Estimate the yearly electricity use of all electric equipment that uses power from the electricity grid, such as water pumping stations.<br>
                                                        <br>
                                                        If the equipment uses power from solar panels, windmills or other renewable sources do not fill this in here. In this case you need to determine the GHG-emission from electricity use separately and add this to the output calculated by the SET.">
                                                        <image xlink:href="{{ url_for('static', filename='INFO-icon.png') }}" style="height:20px; width:16px"></image>                            
                                                    </a>
                                                </svg>
                                                <label for="rw_elec_per_site" class="form-label tt-form-label" style="margin-left: 4px;">Electricity Use (kW)</label> 
                                            </div>
                                            <div class="col-4">
                                                <input type="number" class="validate form-control" id="rw_elec_per_site" name="rw_elec_per_site" min="0" max="9999" step="0.01" value="{{inpt['rewet']['elec_per_site']}}" onchange="set_calculation()" onkeyup="set_calculation()">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="empty-spacing" style="padding-top: 15px;"></div>
                    <div class="container set-base-div accordion" id="set-cu-div">
                        <div class="accordion-item set-accor-div">
                            <div id="set-cu-tog" class="accordion-header row d-flex justify-content-start">
                                <button class="accordion-button collapsed set-accor-btn" type="button" data-bs-toggle="collapse" data-bs-target="#set-cu-coll" aria-expanded="true" aria-controls="set-cu-coll">
                                    <div class="col set-header upper-base" style="padding-left: 0px;">
                                        <p>Crop Use</p>
                                    </div>
                                </button>
                            </div>
                            <div class="set-cu-coll accordion-collapse collapse" id="set-cu-coll" data-bs-parent="#set-cu-div">
                                <div class="accordion-body">
                                    <div class="empty-spacing" style="padding-top: 15px;"></div>
                                    <div class="container set-rewet-div">
                                        <p>After Rewetting</p>
                                        <hr>
                                        <div class="row align-items-center">
                                            <div class="col-4">
                                                <svg height="20" width="16">
                                                    <a data-bs-toggle="popover" tabindex="0" data-bs-trigger="focus" data-bs-placement="right" data-bs-html="true" 
                                                    data-bs-content=
                                                        "Select the best fitting application of the harvested crop.<br>
                                                        If the crop has a lifetime of at least 10 yrs and it replaces a fossil based product, the carbon in the crop is treated as emission reduction.">
                                                        <image xlink:href="{{ url_for('static', filename='INFO-icon.png') }}" style="height:20px; width:16px"></image>                            
                                                    </a>
                                                </svg>
                                                <label for="rw_crop_use" class="form-label tt-form-label" style="margin-left: 4px;">Crop Use</label> 
                                            </div>
                                            <div class="col-8">
                                                <select class="validate form-select" id="rw_crop_use" name="rw_crop_use" onchange="set_calculation()" onkeyup="set_calculation()">
                                                    {% if inpt['rewet']['crop_use'][0:3] == "Bui" %}
                                                        <option selected value="Building Materials e.g insulation, taching, timber">Building material (e.g. insulation, tachine, timber)</option>
                                                    {%else%}
                                                        <option value="Building Materials e.g insulation, taching, timber">Building material (e.g. insulation, tachine, timber)</option>
                                                    {%endif%}
                                                    {% if inpt['rewet']['crop_use'][0:3] == "Bed" %}
                                                        <option selected value="Bedding Material">Bedding material</option>
                                                    {%else%}
                                                        <option value="Bedding Material">Bedding material</option>
                                                    {%endif%}
                                                    {% if inpt['rewet']['crop_use'][0:3] == "Foo" %}
                                                        <option selected selected value="Food Application">Food application</option>
                                                    {%else%}
                                                        <option value="Food Application">Food application</option>
                                                    {%endif%}
                                                    {% if inpt['rewet']['crop_use'][0:3] == "Fod" %}
                                                        <option selected value="Fodder/Feed Application">Fodder/feed application</option>
                                                    {%else%}
                                                        <option value="Fodder/Feed Application">Fodder/feed application</option>
                                                    {%endif%}
                                                    {% if inpt['rewet']['crop_use'][0:3] == "Ene" %}
                                                        <option selected value="Energy Use: biogas, combustion, wood etc">Energy use (e.g. biogas, combustion, wood)</option>
                                                    {%else%}
                                                        <option value="Energy Use: biogas, combustion, wood etc">Energy use (e.g. biogas, combustion, wood)</option>
                                                    {%endif%}
                                                    {% if inpt['rewet']['crop_use'][0:3] == "Pap" %}
                                                        <option selected value="Paper">Paper</option>
                                                    {%else%}
                                                        <option value="Paper">Paper</option>
                                                    {%endif%}
                                                    {% if inpt['rewet']['crop_use'][0:3] == "Ext" %}
                                                        <option selected value="Extraction of Ingredients/Building Blocks: proteins, fibres, cellulose etc">Extraction of ingredients/ building blocks (e.g. protein, fibres, cellulose)</option>
                                                    {%else%}
                                                        <option value="Extraction of Ingredients/Building Blocks: proteins, fibres, cellulose etc">Extraction of ingredients/ building blocks (e.g. protein, fibres, cellulose)</option>
                                                    {%endif%}
                                                    {% if inpt['rewet']['crop_use'][0:3] == "Hig" %}
                                                        <option selected value="High Quality Substrate in Horticulture">High quality substrate in agriculture</option>
                                                    {%else%}
                                                        <option value="High Quality Substrate in Horticulture">High quality substrate in agriculture</option>
                                                    {%endif%}
                                                    {% if inpt['rewet']['crop_use'][0:3] == "Oth" %}
                                                        <option selected value="Other Uses/Unknown">Other uses/ unknown</option>
                                                    {%else%}
                                                        <option value="Other Uses/Unknown">Other uses/ unknown</option>
                                                    {%endif%}
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
                <div class="empty-spacing" style="padding-top: 15px;"></div>
                <div class="row justify-content-center">
                    <div class="col-auto text-center">
                        <p class="text-descr" style="margin-bottom: 5px;">Export results and assumptions</p>
                        <button id="set_csv_btn" class="btn btn-success btn-sm" style="font-weight: 500; max-width: 175px;">Save</button>
                    </div>
                    <div class="col-auto text-center">
                        <p class="text-descr" style="margin-bottom: 5px;">Export GWP Outcomes</p>
                        <button id="set_gwp_btn" class="btn btn-success btn-sm" style="font-weight: 500; max-width: 175px;">GWP GRAPH</button>
                    </div>
                    <div class="col-auto text-center">
                        <p class="text-descr" style="margin-bottom: 5px;">Export Emission Scenario</p>
                        <button id="set_emis_btn" class="btn btn-success btn-sm" style="font-weight: 500; max-width: 175px;">EMISSION GRAPH</button>
                    </div>
                </div>
            </div>

            <div class="empty-spacing" style="padding-top: 15px;"></div>
            <div class="container set-results-div">
                <div style="margin-left: 25px;">
                    <div class="empty-spacing" style="padding-top: 10px;"></div>
                    <h5 style="justify-content: center;">
                        RESULTS
                    </h5>
                    <br>
                    <p>For FFP Tool</p>
                    <hr>
                    <div style="margin-left: 25px;">
                        <div class="row align-items-center">
                            <div class="col-6">
                                <p style="font-weight: bold;">
                                    <svg height="20" width="16" style="margin-right: 4px;">
                                        <a data-bs-toggle="popover" tabindex="0" data-bs-trigger="focus" data-bs-placement="right" data-bs-html="true" data-bs-content="Average carbon credits per hectare per year, as used in the <a href={{ url_for('ffp_tool') }}>FFP tool</a>.">
                                            <image xlink:href="{{ url_for('static', filename='INFO-icon.png') }}" style="height:20px; width:16px"></image>                            
                                        </a>
                                    </svg>
                                    Avg. credits/ha/annum</p>
                            </div>
                            <div class="col-2">
                                <p id="ghg_sav_tot_p_yr_p_ha" style="font-weight: bold;">{{results['carbon_savings']['ghg_savings_total_per_year_per_ha']}}</p>
                            </div>
                            <div class="col-4 d-flex justify-content-end">
                                <p style="font-weight: bold;">tCO2-eq/ year/ ha</p>
                            </div>
                        </div>
                        <br>
                    </div>
                    <p>Baseline Outcomes</p>
                    <hr>
                    <div style="margin-left: 25px;">
                        <p>C Emissions from Soil</p>
                        <hr>
                        <div style="margin-left: 25px;">
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <p>CH4</p>
                                </div>
                                <div class="col-2">
                                    <p id="base_CH4">{{results['base_outcomes']['CH4']}}</p>
                                </div>
                                <div class="col-4 d-flex justify-content-end">
                                    <p>tCO2-eq</p>
                                </div>
                            </div>
                            <hr>
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <p>CO2</p>
                                </div>
                                <div class="col-2">
                                    <p id="base_CO2">{{results['base_outcomes']['CO2']}}</p>
                                </div>
                                <div class="col-4 d-flex justify-content-end">
                                    <p>tCO2-eq</p>
                                </div>
                            </div>
                            <hr>
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <p>GWP Subtotal</p>
                                </div>
                                <div class="col-2">
                                    <p id="base_c_emission_gwp_subtotal">{{results['base_outcomes']['c_emission_gwp_subtotal']}}</p>
                                </div>
                                <div class="col-4 d-flex justify-content-end">
                                    <p>tCO2-eq</p>
                                </div>
                            </div>
                            <hr>
                        </div>
                        <p>N2O Emissions from Soil</p>
                        <hr>
                        <div style="margin-left: 25px;">
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <p>N2O Direct</p>
                                </div>
                                <div class="col-2">
                                    <p id="base_n2o_direct">{{results['base_outcomes']['n2o_direct']}}</p>
                                </div>
                                <div class="col-4 d-flex justify-content-end">
                                    <p>tCO2-eq</p>
                                </div>
                            </div>
                            <hr>
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <p>N2O Indirect</p>
                                </div>
                                <div class="col-2">
                                    <p id="base_n2o_indirect">{{results['base_outcomes']['n2o_indirect']}}</p>
                                </div>
                                <div class="col-4 d-flex justify-content-end">
                                    <p>tCO2-eq</p>
                                </div>
                            </div>
                            <hr>
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <p>GWP Subtotal</p>
                                </div>
                                <div class="col-2">
                                    <p id="base_n2o_emission_gwp_subtotal">{{results['base_outcomes']['n2o_emission_gwp_subtotal']}}</p>
                                </div>
                                <div class="col-4 d-flex justify-content-end">
                                    <p>tCO2-eq</p>
                                </div>
                            </div>
                            <hr>
                        </div>
                        <p>Activity</p>
                        <hr>
                        <div style="margin-left: 25px;">
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <p>GWP Subtotal</p>
                                </div>
                                <div class="col-2">
                                    <p id="base_activity_gwp_subtotal">{{results['base_outcomes']['activity_gwp_subtotal']}}</p>
                                </div>
                                <div class="col-4 d-flex justify-content-end">
                                    <p>tCO2-eq</p>
                                </div>
                            </div>
                            <hr>
                        </div>
                        <p>TOTAL</p>
                        <hr>
                        <div style="margin-left: 25px;">
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <p>GWP Total</p>
                                </div>
                                <div class="col-2">
                                    <p id="base_gwp_total">{{results['base_outcomes']['gwp_total']}}</p>
                                </div>
                                <div class="col-4 d-flex justify-content-end">
                                    <p>tCO2-eq</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="empty-spacing" style="padding-top: 20px;"></div>
                    <p>Rewetting Outcomes</p>
                    <hr>
                    <div style="margin-left: 25px;">
                        <p>C Emissions from Soil</p>
                        <hr>
                        <div style="margin-left: 25px;">
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <p>CH4</p>
                                </div>
                                <div class="col-2">
                                    <p id="rewet_CH4">{{results['rewet_outcomes']['CH4']}}</p>
                                </div>
                                <div class="col-4 d-flex justify-content-end">
                                    <p>tCO2-eq</p>
                                </div>
                            </div>
                            <hr>
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <p>CO2</p>
                                </div>
                                <div class="col-2">
                                    <p id="rewet_CO2">{{results['rewet_outcomes']['CO2']}}</p>
                                </div>
                                <div class="col-4 d-flex justify-content-end">
                                    <p>tCO2-eq</p>
                                </div>
                            </div>
                            <hr>
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <p>GWP Subtotal</p>
                                </div>
                                <div class="col-2">
                                    <p id="rewet_c_emission_gwp_subtotal">{{results['rewet_outcomes']['c_emission_gwp_subtotal']}}</p>
                                </div>
                                <div class="col-4 d-flex justify-content-end">
                                    <p>tCO2-eq</p>
                                </div>
                            </div>
                            <hr>
                        </div>
                        <p>N2O Emissions from Soil</p>
                        <hr>
                        <div style="margin-left: 25px;">
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <p>N2O Direct</p>
                                </div>
                                <div class="col-2">
                                    <p id="rewet_n2o_direct">{{results['rewet_outcomes']['n2o_direct']}}</p>
                                </div>
                                <div class="col-4 d-flex justify-content-end">
                                    <p>tCO2-eq</p>
                                </div>
                            </div>
                            <hr>
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <p>N2O Indirect</p>
                                </div>
                                <div class="col-2">
                                    <p id="rewet_n2o_indirect">{{results['rewet_outcomes']['n2o_indirect']}}</p>
                                </div>
                                <div class="col-4 d-flex justify-content-end">
                                    <p>tCO2-eq</p>
                                </div>
                            </div>
                            <hr>
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <p>GWP Subtotal</p>
                                </div>
                                <div class="col-2">
                                    <p id="rewet_n2o_emission_gwp_subtotal">{{results['rewet_outcomes']['n2o_emission_gwp_subtotal']}}</p>
                                </div>
                                <div class="col-4 d-flex justify-content-end">
                                    <p>tCO2-eq</p>
                                </div>
                            </div>
                            <hr>
                        </div>
                        <p>Activity</p>
                        <hr>
                        <div style="margin-left: 25px;">
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <p>GWP Subtotal</p>
                                </div>
                                <div class="col-2">
                                    <p id="rewet_activity_gwp_subtotal">{{results['rewet_outcomes']['activity_gwp_subtotal']}}</p>
                                </div>
                                <div class="col-4 d-flex justify-content-end">
                                    <p>tCO2-eq</p>
                                </div>
                            </div>
                            <hr>
                        </div>
                        <p>Product</p>
                        <hr>
                        <div style="margin-left: 25px;">
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <p>GWP Subtotal</p>
                                </div>
                                <div class="col-2">
                                    <p id="rewet_product_gwp_subtotal">{{results['rewet_outcomes']['product_gwp_subtotal']}}</p>
                                </div>
                                <div class="col-4 d-flex justify-content-end">
                                    <p>tCO2-eq</p>
                                </div>
                            </div>
                            <hr>
                        </div>
                        <p>TOTAL</p>
                        <hr>
                        <div style="margin-left: 25px;">
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <p>GWP Total</p>
                                </div>
                                <div class="col-2">
                                    <p id="rewet_gwp_total">{{results['rewet_outcomes']['gwp_total']}}</p>
                                </div>
                                <div class="col-4 d-flex justify-content-end">
                                    <p>tCO2-eq</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="empty-spacing" style="padding-top: 20px;"></div>
                    <p>Carbon Savings</p>
                    <hr>
                    <div style="margin-left: 25px;">
                        <p>Greenhouse Gas Savings</p>
                        <hr>
                        <div style="margin-left: 25px;">
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <p>Total per year per site</p>
                                </div>
                                <div class="col-2">
                                    <p id="ghg_sav_tot_p_yr_p_site">{{results['carbon_savings']['ghg_savings_total_per_year_per_site']}}</p>
                                </div>
                                <div class="col-4 d-flex justify-content-end">
                                    <p>tCO2-eq/ year/ site</p>
                                </div>
                            </div>
                            <hr>
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <p style="margin-left: -24px;">
                                        <svg height="20" width="16" style="margin-right: 4px;">
                                            <a data-bs-toggle="popover" tabindex="0" data-bs-trigger="focus" data-bs-placement="right" data-bs-html="true" data-bs-content="The tonnes of CO2-equivalent savings per year is equivalent to the average carbon credits per hectare per year, as used in the <a href={{ url_for('ffp_tool') }}>FFP tool</a>.">
                                                <image xlink:href="{{ url_for('static', filename='INFO-icon.png') }}" style="height:20px; width:16px"></image>                            
                                            </a>
                                        </svg>
                                        Total per hectare per year</p>
                                </div>
                                <div class="col-2">
                                    <p id="ghg_sav_tot_p_yr_p_ha2">{{results['carbon_savings']['ghg_savings_total_per_year_per_ha']}}</p>
                                </div>
                                <div class="col-4 d-flex justify-content-end">
                                    <p>tCO2-eq/ year/ ha</p>
                                </div>
                            </div>
                            <hr>
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <p>Stock per year per site</p>
                                </div>
                                <div class="col-2">
                                    <p id="ghg_sav_stock_p_yr_p_site">{{results['carbon_savings']['ghg_savings_stock_per_year_per_site']}}</p>
                                </div>
                                <div class="col-4 d-flex justify-content-end">
                                    <p>tCO2-eq/ year/ site</p>
                                </div>
                            </div>
                            <hr>
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <p>Stock per year per hectare</p>
                                </div>
                                <div class="col-2">
                                    <p id="ghg_sav_stock_p_yr_p_ha">{{results['carbon_savings']['ghg_savings_stock_per_year_per_ha']}}</p>
                                </div>
                                <div class="col-4 d-flex justify-content-end">
                                    <p>tCO2-eq/ year/ ha</p>
                                </div>
                            </div>
                            <hr>
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <p>Flow per year per site</p>
                                </div>
                                <div class="col-2">
                                    <p id="ghg_sav_flow_p_yr_p_site">{{results['carbon_savings']['ghg_savings_flow_per_year_per_site']}}</p>
                                </div>
                                <div class="col-4 d-flex justify-content-end">
                                    <p>tCO2-eq/ year/ site</p>
                                </div>
                            </div>
                            <hr>
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <p>Flow per year per hectare</p>
                                </div>
                                <div class="col-2">
                                    <p id="ghg_sav_flow_p_yr_p_ha">{{results['carbon_savings']['ghg_savings_flow_per_year_per_ha']}}</p>
                                </div>
                                <div class="col-4 d-flex justify-content-end">
                                    <p>tCO2-eq/ year/ ha</p>
                                </div>
                            </div>
                            <hr>
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <p>Product use per year per site</p>
                                </div>
                                <div class="col-2">
                                    <p id="ghg_sav_pu_p_yr_p_site">{{results['carbon_savings']['ghg_savings_product_use_per_year_per_site']}}</p>
                                </div>
                                <div class="col-4 d-flex justify-content-end">
                                    <p>tCO2-eq/ year/ site</p>
                                </div>
                            </div>
                            <hr>
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <p>Product use per year per hectare</p>
                                </div>
                                <div class="col-2">
                                    <p id="ghg_sav_pu_p_yr_p_ha">{{results['carbon_savings']['ghg_savings_product_use_per_year_per_ha']}}</p>
                                </div>
                                <div class="col-4 d-flex justify-content-end">
                                    <p>tCO2-eq/ year/ ha</p>
                                </div>
                            </div>
                        </div>
                        <div class="empty-spacing" style="padding-top: 20px;"></div>
                        <p>Carbon Stock Peat Soil Start Year</p>
                        <hr>
                        <div style="margin-left: 25px;">
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <p>TCO2 per site</p>
                                </div>
                                <div class="col-2">
                                    <p id="cs_tco2_p_site">{{results['carbon_savings']['carbon_stock_peat_soil_start_year_tco2_per_site']}}</p>
                                </div>
                                <div class="col-4 d-flex justify-content-end">
                                    <p>tCO2-eq/ site</p>
                                </div>
                            </div>
                            <hr>
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <p>Tons carbon per site</p>
                                </div>
                                <div class="col-2">
                                    <p id="cs_ton_c_p_site">{{results['carbon_savings']['carbon_stock_peat_soil_start_year_ton_c_per_site']}}</p>
                                </div>
                                <div class="col-4 d-flex justify-content-end">
                                    <p>ton C/ site</p>
                                </div>
                            </div>
                            <hr>
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <p>TCO2 per hectare</p>
                                </div>
                                <div class="col-2">
                                    <p id="cs_tco2_p_ha">{{results['carbon_savings']['carbon_stock_peat_soil_start_year_tco2_per_ha']}}</p>
                                </div>
                                <div class="col-4 d-flex justify-content-end">
                                    <p>tCO2-eq/ ha</p>
                                </div>
                            </div>
                            <hr>
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <p>Tons carbon per hectare</p>
                                </div>
                                <div class="col-2">
                                    <p id="cs_ton_c_p_ha">{{results['carbon_savings']['carbon_stock_peat_soil_start_year_ton_c_per_ha']}}</p>
                                </div>
                                <div class="col-4 d-flex justify-content-end">
                                    <p>ton C/ ha</p>
                                </div>
                            </div>
                        </div>
                        <div class="empty-spacing" style="padding-top: 20px;"></div>
                        <p>Time Until Peat Is Lost</p>
                        <hr>
                        <div style="margin-left: 25px;">
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <p>Baseline</p>
                                </div>
                                <div class="col-2">
                                    <p id="base_til_peat_loss">{{results['carbon_savings']['time_til_peat_is_lost_base_scenario']}}</p>
                                </div>
                                <div class="col-4 d-flex justify-content-end">
                                    <p>years</p>
                                </div>
                            </div>
                            <hr>
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <p>With Rewetting</p>
                                </div>
                                <div class="col-2">
                                    <p id="rewet_til_peat_loss">{{results['carbon_savings']['time_til_peat_is_lost_rewet_scenario']}}</p>
                                </div>
                                <div class="col-4 d-flex justify-content-end">
                                    <p>years</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--charts-->
            <div class="empty-spacing" style="padding-top: 20px;"></div>
            <div id="set-graphs-div" class="container set-graphs-div">
                <canvas id="gwp_graph"></canvas>
                <div class="empty-spacing" style="padding-top: 20px;"></div>
                <canvas id="timeline_graph"></canvas>
            </div>
            <!--footer-->
            <footer class="border-top" style="margin: 0px;">
                <div class="d-flex justify-content-center" style="padding-bottom: 5px;">
                This tool was developed as part of the Interreg CConnects project.
                </div>
                <div class="d-flex justify-content-center">
                    <div class="d-flex align-items-center" style="max-width: 800px;">
                        <img src="{{url_for('static', filename='cconnects-logo.png')}}" width="105" height="45" class="d-inline-block align-text-center" style="margin: 0px 10px 0px 10px;">
                        <img src="{{url_for('static', filename='INSIGHT-LOGO.png')}}" width="140" height="45" class="d-inline-block align-text-center" style="margin: 0px 10px 0px 10px;">
                    </div>
                </div>
            </footer>
        </div>
    </div>
</div>
<script>
// Fetch data from API and populate fields
document.addEventListener("DOMContentLoaded", function () {
    // Check if user is logged in (you'll need to implement this check)
    const isLoggedIn = {% if session.get('username') %}true{% else %}false{% endif %};    
    // Reference to the button container
    const buttonContainer = document.querySelector(".col-7");
    
    if (isLoggedIn) {
        // Create dropdown structure
        const dropdownHtml = `
            <div class="dropdown">
                <button class="btn btn-primary dropdown-toggle" type="button" id="site_dropdown_btn" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="fas fa-database me-2"></i>Select Site
                </button>
                <ul class="dropdown-menu" id="site_dropdown" aria-labelledby="site_dropdown_btn">
                    <li><h6 class="dropdown-header">Available Sites</h6></li>
                    <!-- Site options will be added here -->
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item" href="#" id="load_latest_data">Load Latest Data</a></li>
                </ul>
            </div>
            <p id="loading_status" style="color: #0d6efd; display: none;">
                <i class="fas fa-spinner fa-spin me-2"></i>Loading data...
            </p>
            <label for="site_name" class="form-label tt-form-label">Site Name</label>
        `;
        
        // Replace the button container with dropdown
        buttonContainer.innerHTML = dropdownHtml;
        
        // Fetch available sites
        fetch("/getAvailableSites")
            .then(response => response.json())
            .then(sites => {
                const dropdown = document.getElementById("site_dropdown");
                const divider = dropdown.querySelector("hr").parentNode;
                
                if (sites.length === 0) {
                    const noSitesItem = document.createElement("li");
                    noSitesItem.innerHTML = `<span class="dropdown-item text-muted">No sites available</span>`;
                    dropdown.insertBefore(noSitesItem, divider);
                } else {
                    // Add site options to dropdown
                    sites.forEach(site => {
                        const listItem = document.createElement("li");
                        const link = document.createElement("a");
                        link.className = "dropdown-item";
                        link.href = "#";
                        link.setAttribute("data-file", site.file);
                        link.textContent = site.name;
                        listItem.appendChild(link);
                        
                        dropdown.insertBefore(listItem, divider);
                        
                        // Add click event to load specific site data
                        link.addEventListener("click", function(e) {
                            e.preventDefault();
                            
                            // Update button text
                            document.getElementById("site_dropdown_btn").innerHTML = 
                                `<i class="fas fa-database me-2"></i>${site.name}`;
                            
                            // Show loading status
                            document.getElementById("loading_status").style.display = "block";
                            
                            // Fetch data for this site
                            fetch(`/fetchSiteData/${encodeURIComponent(site.file)}`)
                                .then(response => response.json())
                                .then(data => processData(data))
                                .catch(error => {
                                    console.error("Error fetching site data:", error);
                                    document.getElementById("loading_status").style.display = "none";
                                    alert("Failed to load site data.");
                                });
                        });
                    });
                }
            })
            .catch(error => {
                console.error("Error fetching available sites:", error);
                alert("Failed to fetch available sites.");
            });
        
        // Add event listener for "Load Latest Data" option
        document.getElementById("load_latest_data").addEventListener("click", function(e) {
            e.preventDefault();
            
            // Update button text
            document.getElementById("site_dropdown_btn").innerHTML = 
                `<i class="fas fa-database me-2"></i>Latest Data`;
            
            // Show loading status
            document.getElementById("loading_status").style.display = "block";
            
            // Fetch latest data
            fetch("/fetchTestData")
                .then(response => response.json())
                .then(data => processData(data))
                .catch(error => {
                    console.error("Error fetching latest data:", error);
                    document.getElementById("loading_status").style.display = "none";
                    alert("Failed to load latest data.");
                });
        });
    } else
    {
        buttonContainer.innerHTML = '';

    }
    
    // Function to process and display data
    function processData(data) {
        console.log("Processing data:", data);
        document.getElementById("loading_status").style.display = "none";
        
        if (!data || Object.keys(data).length === 0) {
            alert("No data found!");
            return;
        }
        
        // Fill in Site Name
        if (data["General Site Data"]) {
            updateInputField("site_name", data["General Site Data"]["Site Name"]);
            updateInputField("tot_area", data["General Site Data"]["Total Area"]);
            updateInputField("coords", data["General Site Data"]["Coordinates"]);
            updateInputField("elevation", data["General Site Data"]["Elevation"]);
            updateInputField("peat_type", data["General Site Data"]["Peat Type"]);
            updateInputField("peat_thick", data["General Site Data"]["Peat Thickness"]);
            updateInputField("year_start", data["General Site Data"]["Year Rewetting Starts"]);
        }
        
        // Fill in Base section
        if (data["Base"]) {
            updateInputField("bs_amount_manure", data["Base"]["Amount Manure"]);
            updateInputField("bs_amount_org_fert", data["Base"]["Amount Organic Fertilizer"]);
            updateInputField("bs_amount_synth_fert", data["Base"]["Amount Synthetic Fertilizer"]);
            updateInputField("bs_avg_num_days", data["Base"]["Average Number of Grazing Days"]);
            updateInputField("bs_crop_name", data["Base"]["Crop Name"]);
            updateInputField("bs_crop_yield", data["Base"]["Crop Yield"]);
            updateInputField("bs_diesel_per_site", data["Base"]["Diesel per Site"]);
            updateInputField("bs_elec_per_site", data["Base"]["Electricity per Site"]);
            updateCheckbox("bs_crop_resid", data["Base"]["Include Crop Residuals"]);
            updateInputField("bs_med_gw_level_summer", data["Base"]["Median Groundwater Level"]);
            updateInputField("bs_avg_num_animals", data["Base"]["Number of Grazing Animals"]);
            updateInputField("bs_type_synth_fert", data["Base"]["Type Synthetic Fertilizer"]);
            updateInputField("bs_type_animals", data["Base"]["Type of Grazing Animals"]);
            updateInputField("bs_veg_class", data["Base"]["Vegetation Class"]);
        }
        
        // Fill in Rewet section
        if (data["Rewet"]) {
            updateInputField("rw_amount_manure", data["Rewet"]["Amount Manure"]);
            updateInputField("rw_amount_org_fert", data["Rewet"]["Amount Organic Fertilizer"]);
            updateInputField("rw_amount_synth_fert", data["Rewet"]["Amount Synthetic Fertilizer"]);
            updateInputField("rw_avg_num_animals", data["Rewet"]["Average Number of Grazing Animals"]);
            updateInputField("rw_avg_num_days", data["Rewet"]["Average Number of Grazing Days"]);
            updateInputField("rw_crop_name", data["Rewet"]["Crop Name"]);
            updateInputField("rw_crop_use", data["Rewet"]["Crop Use"]);
            updateInputField("rw_crop_yield", data["Rewet"]["Crop Yield"]);
            updateInputField("rw_diesel_per_site", data["Rewet"]["Diesel per Site"]);
            updateInputField("rw_elec_per_site", data["Rewet"]["Electricity per Site"]);
            updateCheckbox("rw_crop_resid", data["Rewet"]["Include Crop Residuals"]);
            updateInputField("rw_med_gw_level_summer", data["Rewet"]["Median Groundwater Level"]);
            updateInputField("rw_type_synth_fert", data["Rewet"]["Type Synthetic Fertilizer"]);
            updateInputField("rw_type_animals", data["Rewet"]["Type of Grazing Animals"]);
            updateInputField("rw_veg_class", data["Rewet"]["Vegetation Class"]);
        }
        
        // Fill in Results section
        if (data["Results"]) {
            updateField("base_CH4", data["Results"]["Base CH4"]);
            updateField("base_CO2", data["Results"]["Base CO2"]);
            updateField("base_c_emission_gwp_subtotal", data["Results"]["Base Carbon Emission GWP Subtotal"]);
            updateField("base_n2o_direct", data["Results"]["Base N2O Direct"]);
            updateField("base_n2o_indirect", data["Results"]["Base N2O Indirect"]);
            updateField("base_n2o_emission_gwp_subtotal", data["Results"]["Base N2O Emission GWP Subtotal"]);
            updateField("base_activity_gwp_subtotal", data["Results"]["Base Activity GWP Subtotal"]);
            updateField("base_gwp_total", data["Results"]["Base GWP Total"]);
            updateField("rewet_CH4", data["Results"]["Rewet CH4"]);
            updateField("rewet_CO2", data["Results"]["Rewet CO2"]);
            updateField("rewet_c_emission_gwp_subtotal", data["Results"]["Rewet Carbon Emission GWP Subtotal"]);
            updateField("rewet_n2o_direct", data["Results"]["Rewet N2O Direct"]);
            updateField("rewet_n2o_indirect", data["Results"]["Rewet N2O Indirect"]);
            updateField("rewet_n2o_emission_gwp_subtotal", data["Results"]["Rewet N2O Emission GWP Subtotal"]);
            updateField("rewet_activity_gwp_subtotal", data["Results"]["Rewet Activity GWP Subtotal"]);
            updateField("rewet_product_gwp_subtotal", data["Results"]["Rewet Product GWP Subtotal"]);
            updateField("rewet_gwp_total", data["Results"]["Rewet GWP Total"]);
        }
    }
});

// Helper functions
function updateInputField(id, value) {
    const field = document.getElementById(id);
    if (field) {
        field.value = value || "";
    }
}

function updateCheckbox(id, value) {
    const checkbox = document.getElementById(id);
    if (checkbox) {
        checkbox.checked = value === true || value === "true" || value === 1;
    }
}

function updateField(id, value) {
    const field = document.getElementById(id);
    if (field) {
        field.textContent = value || "";
    }
}

function updateInputField(id, value) {
    let element = document.getElementById(id);
    if (element) {
        element.value = value || "";
    } else {
        console.warn(`Input field with ID '${id}' not found`);
    }
}

function updateCheckbox(id, value) {
    let element = document.getElementById(id);
    if (element) {
        element.checked = value === "true" || value === true;
    } else {
        console.warn(`Checkbox with ID '${id}' not found`);
    }
}
</script>
<!--set script-->
<script src="{{url_for('static', filename='scripts/calc_set.js')}}" async></script>

<!--popover script-->
<script>
    const popoverTriggerList = document.querySelectorAll('[data-bs-toggle="popover"]')
    const popoverList = [...popoverTriggerList].map(popoverTriggerEl => new bootstrap.Popover(popoverTriggerEl))
</script>

<!-- window.onload = function(){...} -->

{% endblock %}
