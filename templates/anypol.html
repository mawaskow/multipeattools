{% extends "base.html" %}

{% block title %}Policy Page{% endblock %}

{% block content %}
<div class="container" style="min-height: 760px;">
    <!-- this policy-store passes the information from the python flask app to the html for storage, so javascript can access it-->
    <div id="pol_id-store" style="display:none">{{pol_id}}</div>
    <div id="policy_div"></div>
</div>

<script>
    var pol_id = parseInt(document.getElementById("pol_id-store").innerHTML);
    //console.log(pol_id);

    // defining dictionaries: the formatting of these pills can be found in style.css
    const pillDct = 
        {'Economy': `econ-class-pill`,
        'Land-Use / Agriculture': `land-class-pill`,
        'Environmental quality: water, soil, air':`env-class-pill`,
        'Community and Culture':`comm-class-pill`,
        'Climate':`clm-class-pill`,
        'Energy':`enr-class-pill`,
        'Biodiversity':`bio-class-pill`,
        'Research and applied sciences':`res-class-pill`,
        //
        'Land Use / Agriculture': `land-class-pill`,
        'Climate Action':`clm-class-pill`,
        'Research and Applied Sciences':`res-class-pill`,
        'Environment Quality':`env-class-pill`,
        };
    // this just normalizes the names being used to display in the category pills
    const pillNames = 
        {'Economy': `Economy`,
        'Land-Use / Agriculture': `Land-Use / Agriculture`,
        'Environmental quality: water, soil, air':`Environmental Quality`,
        'Community and Culture':`Community and Culture`,
        'Climate':`Climate`,
        'Energy':`Energy`,
        'Biodiversity':`Biodiversity`,
        'Research and applied sciences':`Research`,
        //
        'Land Use / Agriculture': `Land-Use / Agriculture`,
        'Climate Action':`Climate`,
        'Research and Applied Sciences':`Research`,
        'Environment Quality':`Environmental Quality`,
        };
    // adds countries for flags/levels
    //https://www.alt-codes.net/flags
    const flagmojis = {
        "Global":"ğŸŒ",
        "European":"ğŸ‡ªğŸ‡º",
        "Austria":"ğŸ‡¦ğŸ‡¹",
        "Belgium":"ğŸ‡§ğŸ‡ª",
        "Bulgaria":"ğŸ‡§ğŸ‡¬",
        "Croatia":"ğŸ‡­ğŸ‡·",
        "Cyprus":"ğŸ‡¨ğŸ‡¾",
        "Czech Republic":"ğŸ‡¨ğŸ‡¿",
        "Denmark":"ğŸ‡©ğŸ‡°",
        "Estonia":"ğŸ‡ªğŸ‡ª",
        "Finland":"ğŸ‡«ğŸ‡®",
        "France":"ğŸ‡«ğŸ‡·",
        "Germany":"ğŸ‡©ğŸ‡ª",
        "Greece":"ğŸ‡¬ğŸ‡·",
        "Hungary":"ğŸ‡­ğŸ‡º",
        "Iceland":"ğŸ‡®ğŸ‡¸",
        "Ireland":"ğŸ‡®ğŸ‡ª",
        "Italy":"ğŸ‡®ğŸ‡¹",
        "Latvia":"ğŸ‡±ğŸ‡»",
        "Liechtenstein":"ğŸ‡±ğŸ‡®",
        "Lithuania":"ğŸ‡±ğŸ‡¹",
        "Luxembourg":"ğŸ‡±ğŸ‡º",
        "Malta":"ğŸ‡²ğŸ‡¹",
        "Netherlands":"ğŸ‡³ğŸ‡±",
        "Norway":"ğŸ‡³ğŸ‡´",
        "Poland":"ğŸ‡µğŸ‡±",
        "Portugal":"ğŸ‡µğŸ‡¹",
        "Romania":"ğŸ‡·ğŸ‡´",
        "Slovakia":"ğŸ‡¸ğŸ‡°",
        "Slovenia":"ğŸ‡¸ğŸ‡®",
        "Spain":"ğŸ‡ªğŸ‡¸",
        "Sweden":"ğŸ‡¸ğŸ‡ª",
        "Switzerland":"ğŸ‡¨ğŸ‡­",
        "United Kingdom":"ğŸ‡¬ğŸ‡§"
    }
    // traductions for the word "Overview" in different languages
    const transl_overview = {
        "Flemish":"Overzicht",
        "French":"AperÃ§u",
        "English":"Overview",
        "Bulgarian":"ĞĞ±Ñ‰ Ğ¿Ñ€ĞµĞ³Ğ»ĞµĞ´",
        "Croatian":"Pregled",
        "Turkish":"genel bakÄ±ÅŸ",
        "Czech":"PÅ™ehled",
        "Danish":"Oversigt",
        "Estonian":"Ãœlevaade",
        "Finnish":"Yleiskatsaus",
        "German":"Ãœberblick",
        "Greek":"Î•Ï€Î¹ÏƒÎºÏŒÏ€Î·ÏƒÎ·",
        "Hungarian":"ÃttekintÃ©s",
        "Icelandic":"Yfirlit",
        "Irish":"Overview",
        "Italian":"Panoramica",
        "Latvian":"PÄrskats",
        "Lithuanian":"ApÅ¾valga",
        "Maltese":"Ä§arsa Ä¡enerali",
        "Dutch":"Overzicht",
        "Norwegian":"Oversikt",
        "Polish":"PrzeglÄ…d",
        "Portuguese":"VisÃ£o geral",
        "Romanian":"Prezentare generalÄƒ",
        "Slovak":"PrehÄ¾ad",
        "Slovenian":"Pregled",
        "Spanish":"Resumen",
        "Swedish":"Ã–versikt",
    }

    // traductions for the word "Table of Contents" in different languages
    const transl_toc = {
        "Flemish": "Inhoudsopgave", 
        "French": "Table des matiÃ¨res",
        "English": "Table of Contents",
        "Bulgarian": "Ğ¡ÑŠĞ´ÑŠÑ€Ğ¶Ğ°Ğ½Ğ¸Ğµ",
        "Croatian": "SadrÅ¾aj",
        "Turkish": "Ä°Ã§indekiler",
        "Czech": "Obsah",
        "Danish": "Indholdsfortegnelse",
        "Estonian": "Sisukord",
        "Finnish": "SisÃ¤llysluettelo",
        "German": "Inhaltsverzeichnis",
        "Greek": "Î Î¯Î½Î±ÎºÎ±Ï‚ Ï€ÎµÏÎ¹ÎµÏ‡Î¿Î¼Î­Î½Ï‰Î½",
        "Hungarian": "TartalomjegyzÃ©k",
        "Icelandic": "Efnisyfirlit",
        "Irish": "ClÃ¡r Ãbhair", 
        "Italian": "Indice",
        "Latvian": "Saturs",
        "Lithuanian": "Turinys",
        "Maltese": "Wer", 
        "Dutch": "Inhoudsopgave",
        "Norwegian": "Innholdsfortegnelse",
        "Polish": "Spis treÅ›ci",
        "Portuguese": "Ãndice",
        "Romanian": "Cuprins",
        "Slovak": "Obsah",
        "Slovenian": "Kazalo",
        "Spanish": "Ãndice",
        "Swedish": "InnehÃ¥llsfÃ¶rteckning",
        // Ajoutez d'autres langues si nÃ©cessaire
    };

        // traductions for country names in their native languages
    const transl_countries = {
        "Austria":{
            "German":"Ã–sterreich",
            "English":"Austria",
        },
        "Belgium":{
            "French": "Belgique", 
            "Dutch": "BelgiÃ«",
            "English": "Belgium",
            "German": "Belgien",
            "Flemish": "BelgiÃ«",
        },
        "Bulgaria":{
            "Bulgarian": "Ğ‘ÑŠĞ»Ğ³Ğ°Ñ€Ğ¸Ñ",
            "English": "Bulgaria",
        },
        "Croatia":{
            "Croatian": "Hrvatska",
            "English": "Croatia",
        },
        "Cyprus":{
            "Greek": "ÎšÏÏ€ÏÎ¿Ï‚",
            "Turkish": "KÄ±brÄ±s",
            "English": "Cyprus",
        },
        "Czech Republic":{
            "Czech": "ÄŒeskÃ¡ republika",
            "English": "Czech Republic",
        },
        "Denmark": {
            "Danish":"Danmark",
            "English":"Denmark",
        },
        "Estonia": {
            "Estonian":"Eesti",
            "English":"Estonia",
        },
        "Finland": {
            "Finnish":"Suomi",
            "Swedish":"Finland",
            "English":"Finland",
        },
        "France": {
            "French":"France",
            "English":"France",
        },
        "Germany": {
            "German":"Deutschland",
            "English":"Germany",
        },
        "Greece": {
            "Greek":"Î•Î»Î»Î¬Î´Î±",
            "English":"Greece",
        },
        "Hungary": {
            "Hungarian":"MagyarorszÃ¡g",
            "English":"Hungary",
        },
        "Iceland": {
            "Icelandic":"Ãsland",
            "English":"Iceland",
        },
        "Ireland": {
            "Irish":"Ã‰ire",
            "English":"Ireland",
        },
        "Italy": {
            "Italian":"Italia",
            "English":"Italy",
        },
        "Latvia": {
            "Latvian":"Latvija",
            "English":"Latvia",
        },
        "Liechtenstein": {
            "German":"Liechtenstein",
            "English":"Liechtenstein",
        },
        "Lithuania": {
            "Lithuanian":"Lietuva",
            "English":"Lithuania",
        },
        "Luxembourg": {
            "Luxembourgish":"LÃ«tzebuerg",
            "French":"Luxembourg",
            "German":"Luxemburg",
            "English":"Luxembourg",
        },
        "Malta": {
            "Maltese":"Malta",
            "English":"Malta",
        },
        "Netherlands": {
            "Dutch":"Nederland",
            "English":"Netherlands",
        },
        "Norway": {
            "Norwegian":"Norge",
            "English":"Norway",
        },
        "Poland": {
            "Polish":"Polska",
            "English":"Poland",
        },
        "Portugal": {
            "Portuguese":"Portugal",
            "English":"Portugal",
        },
        "Romania": {
            "Romanian":"RomÃ¢nia",
            "English":"Romania",
        },
        "Slovakia": {
            "Slovak":"Slovensko",
            "English":"Slovakia",
        },
        "Slovenia": {
            "Slovenian":"Slovenija",
            "English":"Slovenia",
        },
        "Spain": {
            "Spanish":"EspaÃ±a",
            "English":"Spain",
        },
        "Sweden": {
            "Swedish":"Sverige",
            "English":"Sweden",
        },
        "Switzerland": {
            "German":"Schweiz",
            "French":"Suisse",
            "Italian":"Svizzera",
            "Romansh":"Svizra",
            "English":"Switzerland",
        },
        "United Kingdom": {
            "English":"United Kingdom",
        },
    };

    // traductions for "Policy Document" in different languages
    const transl_policy_document = {
        "Flemish": "Beleidsdocument",
        "English": "Policy Document",
        "German": "Politikdokument", 
        "French": "Document de la politique", 
        "Bulgarian": "ĞŸĞ¾Ğ»Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚",
        "Croatian": "Dokument politike",
        "Turkish": "Politika Belgesi", 
        "Czech": "PolitickÃ½ dokument",
        "Danish": "Politikdokument",
        "Estonian": "Poliitikadokument",
        "Finnish": "Toimintalinjadokumentti",
        "Greek": "ÎˆÎ³Î³ÏÎ±Ï†Î¿ Ï€Î¿Î»Î¹Ï„Î¹ÎºÎ®Ï‚",
        "Hungarian": "Politikai dokumentum",
        "Icelandic": "StefnumÃ¡laskjal",
        "Irish": "CÃ¡ipÃ©is Beartais", 
        "Italian": "Documento di politica",
        "Latvian": "Politikas dokuments",
        "Lithuanian": "Politikos dokumentas",
        "Maltese": "Dokument tal-Politika",
        "Dutch": "Beleidsdocument", 
        "Norwegian": "Policy Dokument",
        "Polish": "Dokument polityczny",
        "Portuguese": "Documento de polÃ­tica",
        "Romanian": "Document de politicÄƒ",
        "Slovak": "PolitickÃ½ dokument",
        "Slovenian": "Dokument politike",
        "Spanish": "Documento de polÃ­tica",
        "Swedish": "Policydokument",
    };

    // traductions for "Policy Info Page" in different languages
    const transl_policy_info_page = {
        "Flemish": "Beleidsinfopagina",        
        "English": "Policy Info Page",
        "German": "Politikinformationsseite",
        "French": "Page d'information sur la politique",
        "Bulgarian": "Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ğ° ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° Ğ·Ğ° Ğ¿Ğ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°Ñ‚Ğ°",
        "Croatian": "Stranica s informacijama o politici",
        "Turkish": "Politika Bilgi SayfasÄ±",
        "Czech": "InformaÄnÃ­ strÃ¡nka o politice",
        "Danish": "Informationsside om politik",
        "Estonian": "Poliitika infoleht",
        "Finnish": "Toimintalinjan infosivu",
        "Greek": "Î£ÎµÎ»Î¯Î´Î± Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¹ÏÎ½ Ï€Î¿Î»Î¹Ï„Î¹ÎºÎ®Ï‚",
        "Hungarian": "Politikai informÃ¡ciÃ³s oldal",
        "Icelandic": "UpplÃ½singasÃ­Ã°a stefnu",
        "Irish": "Leathanach Eolais Beartais", 
        "Italian": "Pagina info politica",
        "Latvian": "Politikas informÄcijas lapa",
        "Lithuanian": "Politikos informacijos puslapis",
        "Maltese": "PaÄ¡na ta' Informazzjoni dwar il-Politika",
        "Dutch": "Beleidsinfopagina",
        "Norwegian": "Informasjonsside for policy",
        "Polish": "Strona informacyjna polityki",
        "Portuguese": "PÃ¡gina de informaÃ§Ã£o da polÃ­tica",
        "Romanian": "PaginÄƒ de informaÈ›ii despre politicÄƒ",
        "Slovak": "InformaÄnÃ¡ strÃ¡nka politiky",
        "Slovenian": "Stran s podatki o politiki",
        "Spanish": "PÃ¡gina de informaciÃ³n de la polÃ­tica",
        "Swedish": "Policysida",
    };

    //translation for the different scales in different languages
    const transl_scale = {
        "Flemish":{
            "Global":"Globaal",
            "European":"Europees",
            "National":"Nationaal",
            "Regional":"Regionaal",
            "Local":"Lokaal"
        },
        "English":{
            "Global":"Global",
            "European":"European",
            "National":"National",
            "Regional":"Regional",
            "Local":"Local"
        },
        "German":{
            "Global":"Global",
            "European":"EuropÃ¤isch",
            "National":"National",
            "Regional":"Regional",
            "Local":"Lokal"
        },
        "French":{
            "Global":"Mondial",
            "European":"EuropÃ©en",
            "National":"National",
            "Regional":"RÃ©gional",
            "Local":"Local"
        },
        "Bulgarian":{
            "Global":"Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ĞµĞ½",
            "European":"Ğ•Ğ²Ñ€Ğ¾Ğ¿ĞµĞ¹ÑĞºĞ¸",
            "National":"ĞĞ°Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ĞµĞ½",
            "Regional":"Ğ ĞµĞ³Ğ¸Ğ¾Ğ½Ğ°Ğ»ĞµĞ½",
            "Local":"ĞœĞµÑÑ‚ĞµĞ½"
        },
        "Croatian":{
            "Global":"Globalni",
            "European":"Europski",
            "National":"Nacionalni",
            "Regional":"Regionalni",
            "Local":"Lokalni"
        },
        "Turkish":{
            "Global":"KÃ¼resel",
            "European":"Avrupa",
            "National":"Ulusal",
            "Regional":"BÃ¶lgesel",
            "Local":"Yerel"
        },
        "Czech":{
            "Global":"GlobÃ¡lnÃ­",
            "European":"EvropskÃ½",
            "National":"NÃ¡rodnÃ­",
            "Regional":"RegionÃ¡lnÃ­",
            "Local":"MÃ­stnÃ­"
        },
        "Danish":{
            "Global":"Global",
            "European":"EuropÃ¦isk",
            "National":"National",
            "Regional":"Regional",
            "Local":"Lokal"
        },
        "Estonian":{
            "Global":"Globaalne",
            "European":"Euroopalik",
            "National":"Rahvuslik",
            "Regional":"Piirkondlik",
            "Local":"Kohalik"
        },
        "Finnish":{
            "Global":"Maailmanlaajuisesti",
            "European":"Eurooppalainen",
            "National":"Kansallinen",
            "Regional":"Alueellinen",
            "Local":"Paikallinen"
        },
        "Greek":{
            "Global":"Î Î±Î³ÎºÏŒÏƒÎ¼Î¹Î¿Ï‚",
            "European":"Î•Ï…ÏÏ‰Ï€Î±ÏŠÎºÏŒÏ‚",
            "National":"Î•Î¸Î½Î¹ÎºÏŒÏ‚",
            "Regional":"Î ÎµÏÎ¹Ï†ÎµÏÎµÎ¹Î±ÎºÏŒÏ‚",
            "Local":"Î¤Î¿Ï€Î¹ÎºÏŒÏ‚"
        },
        "Hungarian":{
            "Global":"GlobÃ¡lis",
            "European":"EurÃ³pai",
            "National":"Nemzeti",
            "Regional":"RegionÃ¡lis",
            "Local":"Helyi"
        },
        "Icelandic":{
            "Global":"Heims",
            "European":"EvrÃ³pskur",
            "National":"ÃjÃ³Ã°legur",
            "Regional":"SvÃ¦Ã°isbundinn",
            "Local":"StaÃ°bundinn"
        },
        "Irish":{
            "Global":"Domhanda",
            "European":"Eorpach",
            "National":"NÃ¡isiÃºnta",
            "Regional":"RÃ©igiÃºnach",
            "Local":"ÃitiÃºil"
        },
        "Italian":{
            "Global":"Globale",
            "European":"Europeo",
            "National":"Nazionale",
            "Regional":"Regionale",
            "Local":"Locale"
        },
        "Latvian":{
            "Global":"GlobÄli",
            "European":"EiropieÅ¡u",
            "National":"NacionÄls",
            "Regional":"reÄ£ionÄlÄ",
            "Local":"VietÄ“jÄ"
        },
        "Lithuanian":{
            "Global":"Globalus",
            "European":"EeuropietiÅ¡kas",
            "National":"Nacionalinis",
            "Regional":"Regioninis",
            "Local":"Vietinis"
        },
        "Maltese":{
            "Global":"Globali",
            "European":"Ewropew",
            "National":"Nazzjonali",
            "Regional":"ReÄ¡jonali",
            "Local":"Lokali"
        },
        "Dutch":{
            "Global":"Wereldwijd",
            "European":"Europese",
            "National":"Nationaal",
            "Regional":"Regionaal",
            "Local":"Lokaal"
        },
        "Norwegian":{
            "Global":"Global",
            "European":"Europeisk",
            "National":"Nasjonal",
            "Regional":"Regional",
            "Local":"Lokale"
        },
        "Polish":{
            "Global":"Åšwiatowy",
            "European":"Europejski",
            "National":"Krajowy",
            "Regional":"Regionalny",
            "Local":"Lokalny"
        },
        "Portuguese":{
            "Global":"Global",
            "European":"Europeu",
            "National":"Nacional",
            "Regional":"Regional",
            "Local":"Local"
        },
        "Romanian":{
            "Global":"GlobalÄƒ",
            "European":"European",
            "National":"NaÈ›ional",
            "Regional":"Regional",
            "Local":"Local"
        },
        "Slovak":{
            "Global":"GlobÃ¡lne",
            "European":"EurÃ³psky",
            "National":"NÃ¡rodnÃ©",
            "Regional":"RegionÃ¡lne",
            "Local":"Miestne"
        },
        "Slovenian":{
            "Global":"Globalno",
            "European":"Evropski",
            "National":"Nacionalni",
            "Regional":"Regionalni",
            "Local":"Lokalni"
        },
        "Spanish":{
            "Global":"Global",
            "European":"Europeo",
            "National":"Nacional",
            "Regional":"Regional",
            "Local":"Local"
        },
        "Swedish":{
            "Global":"Global",
            "European":"Europeisk",
            "National":"Nationell",
            "Regional":"Regional",
            "Local":"Lokal"
        },
    };

    // translation for categories in different languages
    const transl_categories = {
        "Flemish": {
            "Economy": "Economie",
            "Land-Use / Agriculture": "Grondgebruik / Landbouw",
            "Environmental Quality": "Milieu Kwaliteit",
            "Community and Culture": "Gemeenschap en Cultuur",
            "Climate": "Klimaat",
            "Energy": "Energie",
            "Biodiversity": "Biodiversiteit",
            "Research": "Onderzoek",
        },
        "English": {
            "Economy": "Economy",
            "Land-Use / Agriculture": "Land-Use / Agriculture",
            "Environmental Quality": "Environmental Quality",
            "Community and Culture": "Community and Culture",
            "Climate": "Climate",
            "Energy": "Energy",
            "Biodiversity": "Biodiversity",
            "Research": "Research",
        },
        "German": {
            "Economy": "Wirtschaft",
            "Land-Use / Agriculture": "Landnutzung / Landwirtschaft",
            "Environmental Quality": "UmweltqualitÃ¤t",
            "Community and Culture": "Gemeinschaft und Kultur",
            "Climate": "Klima",
            "Energy": "Energie",
            "Biodiversity": "BiodiversitÃ¤t",
            "Research": "Forschung",
        },
        "French": {
            "Economy": "Ã‰conomie",
            "Land-Use / Agriculture": "Utilisation des terres / Agriculture",
            "Environmental Quality": "QualitÃ© environnementale",
            "Community and Culture": "CommunautÃ© et culture",
            "Climate": "Climat",
            "Energy": "Ã‰nergie",
            "Biodiversity": "BiodiversitÃ©",
            "Research": "Recherche",
        },
        "Bulgarian": {
            "Economy": "Ğ˜ĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸ĞºĞ°",
            "Land-Use / Agriculture": "Ğ˜Ğ·Ğ¿Ğ¾Ğ»Ğ·Ğ²Ğ°Ğ½Ğµ Ğ½Ğ° Ğ·ĞµĞ¼ÑÑ‚Ğ° / Ğ—ĞµĞ¼ĞµĞ´ĞµĞ»Ğ¸Ğµ",
            "Environmental Quality": "ĞšĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ½Ğ° Ğ¾ĞºĞ¾Ğ»Ğ½Ğ°Ñ‚Ğ° ÑÑ€ĞµĞ´Ğ°",
            "Community and Culture": "ĞĞ±Ñ‰Ğ½Ğ¾ÑÑ‚ Ğ¸ ĞºÑƒĞ»Ñ‚ÑƒÑ€Ğ°",
            "Climate": "ĞšĞ»Ğ¸Ğ¼Ğ°Ñ‚",
            "Energy": "Ğ•Ğ½ĞµÑ€Ğ³Ğ¸Ñ",
            "Biodiversity": "Ğ‘Ğ¸Ğ¾Ñ€Ğ°Ğ·Ğ½Ğ¾Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ¸Ğµ",
            "Research": "Ğ˜Ğ·ÑĞ»ĞµĞ´Ğ²Ğ°Ğ½Ğ¸Ñ",
        },
        "Croatian": {
            "Economy": "Ekonomija",
            "Land-Use / Agriculture": "KoriÅ¡tenje zemljiÅ¡ta / Poljoprivreda",
            "Environmental Quality": "Kvaliteta okoliÅ¡a",
            "Community and Culture": "Zajednica i kultura",
            "Climate": "Klima",
            "Energy": "Energija",
            "Biodiversity": "Bioraznolikost",
            "Research": "IstraÅ¾ivanje",
        },
        "Turkish": {
            "Economy": "Ekonomi",
            "Land-Use / Agriculture": "Arazi KullanÄ±mÄ± / TarÄ±m",
            "Environmental Quality": "Ã‡evresel Kalite",
            "Community and Culture": "Toplum ve KÃ¼ltÃ¼r",
            "Climate": "Ä°klim",
            "Energy": "Enerji",
            "Biodiversity": "BiyoÃ§eÅŸitlilik",
            "Research": "AraÅŸtÄ±rma",
        },
        "Czech": {
            "Economy": "Ekonomika",
            "Land-Use / Agriculture": "VyuÅ¾itÃ­ pÅ¯dy / ZemÄ›dÄ›lstvÃ­",
            "Environmental Quality": "Kvalita Å¾ivotnÃ­ho prostÅ™edÃ­",
            "Community and Culture": "Komunita a kultura",
            "Climate": "Klima",
            "Energy": "Energie",
            "Biodiversity": "Biodiverzita",
            "Research": "VÃ½zkum",
        },
        "Danish": {
            "Economy": "Ã˜konomi",
            "Land-Use / Agriculture": "Arealanvendelse / Landbrug",
            "Environmental Quality": "MiljÃ¸kvalitet",
            "Community and Culture": "FÃ¦llesskab og kultur",
            "Climate": "Klima",
            "Energy": "Energi",
            "Biodiversity": "Biodiversitet",
            "Research": "Forskning",
        },
        "Estonian": {
            "Economy": "Majandus",
            "Land-Use / Agriculture": "Maa kasutamine / PÃµllumajandus",
            "Environmental Quality": "Keskkonna kvaliteet",
            "Community and Culture": "Kogukond ja kultuur",
            "Climate": "Kliima",
            "Energy": "Energia",
            "Biodiversity": "Biodiversiteet",
            "Research": "Uuringud",
        },
        "Finnish": {
            "Economy": "Talous",
            "Land-Use / Agriculture": "Maan kÃ¤yttÃ¶ / Maatalous",
            "Environmental Quality": "YmpÃ¤ristÃ¶n laatu",
            "Community and Culture": "YhteisÃ¶ ja kulttuuri",
            "Climate": "Ilmasto",
            "Energy": "Energia",
            "Biodiversity": "Biodiversiteetti",
            "Research": "Tutkimus",
        },
        "Greek": {
            "Economy": "ÎŸÎ¹ÎºÎ¿Î½Î¿Î¼Î¯Î±",
            "Land-Use / Agriculture": "Î§ÏÎ®ÏƒÎ· Î³Î·Ï‚ / Î“ÎµÏ‰ÏÎ³Î¯Î±",
            "Environmental Quality": "Î Î¿Î¹ÏŒÏ„Î·Ï„Î± Ï€ÎµÏÎ¹Î²Î¬Î»Î»Î¿Î½Ï„Î¿Ï‚",
            "Community and Culture": "ÎšÎ¿Î¹Î½ÏŒÏ„Î·Ï„Î± ÎºÎ±Î¹ Î Î¿Î»Î¹Ï„Î¹ÏƒÎ¼ÏŒÏ‚",
            "Climate": "ÎšÎ»Î¯Î¼Î±",
            "Energy": "Î•Î½Î­ÏÎ³ÎµÎ¹Î±",
            "Biodiversity": "Î’Î¹Î¿Ï€Î¿Î¹ÎºÎ¹Î»ÏŒÏ„Î·Ï„Î±",
            "Research": "ÎˆÏÎµÏ…Î½Î±",
        },
        "Hungarian": {
            "Economy": "GazdasÃ¡g",
            "Land-Use / Agriculture": "FÃ¶ldhasznÃ¡lat / MezÅ‘gazdasÃ¡g",
            "Environmental Quality": "KÃ¶rnyezeti minÅ‘sÃ©g",
            "Community and Culture": "KÃ¶zÃ¶ssÃ©g Ã©s kultÃºra",
            "Climate": "Ã‰ghajlat",
            "Energy": "Energia",
            "Biodiversity": "BiodiverzitÃ¡s",
            "Research": "KutatÃ¡s",
        },
        "Icelandic": {
            "Economy": "Efnahagur",
            "Land-Use / Agriculture": "Landnotkun / LandbÃºnaÃ°ur",
            "Environmental Quality": "Umhverfiskvalitet",
            "Community and Culture": "SamfÃ©lag og menning",
            "Climate": "Loftslag",
            "Energy": "Orka",
            "Biodiversity": "LÃ­ffrÃ¦Ã°ileg fjÃ¶lbreytni",
            "Research": "RannsÃ³knir",
        },
        "Irish": {
            "Economy": "Geilleagar",
            "Land-Use / Agriculture": "ÃšsÃ¡id Talamh / TalmhaÃ­ocht",
            "Environmental Quality": "CÃ¡ilÃ­ocht Comhshaoil",
            "Community and Culture": "Pobal agus CultÃºr",
            "Climate": "AerÃ¡id",
            "Energy": "Fuinneamh",
            "Biodiversity": "BiodiversitÃ©",
            "Research": "Taighde",
        },
        "Italian": {
            "Economy": "Economia",
            "Land-Use / Agriculture": "Uso del suolo / Agricoltura",
            "Environmental Quality": "QualitÃ  ambientale",
            "Community and Culture": "ComunitÃ  e cultura",
            "Climate": "Clima",
            "Energy": "Energia",
            "Biodiversity": "BiodiversitÃ ",
            "Research": "Ricerca",
        },
        "Latvian": {
            "Economy": "Ekonomika",
            "Land-Use / Agriculture": "Zemes izmantoÅ¡ana / LauksaimniecÄ«ba",
            "Environmental Quality": "Vides kvalitÄte",
            "Community and Culture": "Kopiena un kultÅ«ra",
            "Climate": "Klimats",
            "Energy": "EnerÄ£ija",
            "Biodiversity": "BioloÄ£iskÄ daudzveidÄ«ba",
            "Research": "PÄ“tniecÄ«ba",
        },
        "Lithuanian": {
            "Economy": "Ekonomika",
            "Land-Use / Agriculture": "Å½emÄ—s naudojimas / Å½emÄ—s Å«kis",
            "Environmental Quality": "Aplinkos kokybÄ—",
            "Community and Culture": "BendruomenÄ— ir kultÅ«ra",
            "Climate": "Klimatas",
            "Energy": "Energija",
            "Biodiversity": "BiologinÄ— Ä¯vairovÄ—",
            "Research": "Tyrimai",
        },
        "Maltese": {
            "Economy": "Ekonomija",
            "Land-Use / Agriculture": "UÅ¼u tal-Art / Agrikoltura",
            "Environmental Quality": "KwalitÃ  Ambjentali",
            "Community and Culture": "KomunitÃ  u Kultura",
            "Climate": "Klima",
            "Energy": "EnerÄ¡ija",
            "Biodiversity": "BiodiversitÃ ",
            "Research": "RiÄ‹erka",
        },
        "Dutch": {
            "Economy": "Economie",
            "Land-Use / Agriculture": "Grondgebruik / Landbouw",
            "Environmental Quality": "Milieu kwaliteit",
            "Community and Culture": "Gemeenschap en Cultuur",
            "Climate": "Klimaat",
            "Energy": "Energie",
            "Biodiversity": "Biodiversiteit",
            "Research": "Onderzoek",
        },
        "Norwegian": {
            "Economy": "Ã˜konomi",
            "Land-Use / Agriculture": "LandomrÃ¥debruk / Landbruk",
            "Environmental Quality": "MiljÃ¸kvalitet",
            "Community and Culture": "Samfunn og kultur",
            "Climate": "Klima",
            "Energy": "Energi",
            "Biodiversity": "Biodiversitet",
            "Research": "Forskning",
        },
        "Polish": {
            "Economy": "Gospodarka",
            "Land-Use / Agriculture": "UÅ¼ytkowanie ziemi / Rolnictwo",
            "Environmental Quality": "JakoÅ›Ä‡ Å›rodowiska",
            "Community and Culture": "SpoÅ‚ecznoÅ›Ä‡ i kultura",
            "Climate": "Klimat",
            "Energy": "Energia",
            "Biodiversity": "BiorÃ³Å¼norodnoÅ›Ä‡",
            "Research": "Badania",
        },
        "Portuguese": {
            "Economy": "Economia",
            "Land-Use / Agriculture": "Uso da Terra / Agricultura",
            "Environmental Quality": "Qualidade Ambiental",
            "Community and Culture": "Comunidade e Cultura",
            "Climate": "Clima",
            "Energy": "Energia",
            "Biodiversity": "Biodiversidade",
            "Research": "Pesquisa",
        },
        "Romanian": {
            "Economy": "Economia",
            "Land-Use / Agriculture": "Utilizarea terenurilor / AgriculturÄƒ",
            "Environmental Quality": "Calitatea mediului",
            "Community and Culture": "Comunitate È™i culturÄƒ",
            "Climate": "ClimÄƒ",
            "Energy": "Energie",
            "Biodiversity": "Biodiversitate",
            "Research": "Cercetare",
        },
        "Slovak": {
            "Economy": "HospodÃ¡rstvo",
            "Land-Use / Agriculture": "VyuÅ¾itie pÃ´dy / PoÄ¾nohospodÃ¡rstvo",
            "Environmental Quality": "Kvalita Å¾ivotnÃ©ho prostredia",
            "Community and Culture": "Komunita a kultÃºra",
            "Climate": "KlÃ­ma",
            "Energy": "Energia",
            "Biodiversity": "Biodiverzita",
            "Research": "VÃ½skum",
        },
        "Slovenian": {
            "Economy": "Gospodarstvo",
            "Land-Use / Agriculture": "Raba zemljiÅ¡Ä / Kmetijstvo",
            "Environmental Quality": "Kakovost okolja",
            "Community and Culture": "Skupnost in kultura",
            "Climate": "Podnebje",
            "Energy": "Energija",
            "Biodiversity": "Biotska raznovrstnost",
            "Research": "Raziskave",
        },
        "Spanish": {
            "Economy": "EconomÃ­a",
            "Land-Use / Agriculture": "Uso de la tierra / Agricultura",
            "Environmental Quality": "Calidad ambiental",
            "Community and Culture": "Comunidad y cultura",
            "Climate": "Clima",
            "Energy": "EnergÃ­a",
            "Biodiversity": "Biodiversidad",
            "Research": "InvestigaciÃ³n",
        },
        "Swedish": {
            "Economy": "Ekonomi",
            "Land-Use / Agriculture": "MarkanvÃ¤ndning / Jordbruk",
            "Environmental Quality": "MiljÃ¶ kvalitet",
            "Community and Culture": "Gemenskap och kultur",
            "Climate": "Klimat",
            "Energy": "Energi",
            "Biodiversity": "Biodiversitet",
            "Research": "Forskning",
        },
    };

    const policy_category_mappings= {
        "Biodiversity":{
            "green":["Circular Economy"],
            "sdg":["Life Land", "Life Water"]
        },
        "Climate":{
            "green":["Climate", "Zero Pollution"],
            "sdg":["Climate Action"]
        },
        "Climate Action":{
            "green":["Climate", "Zero Pollution"],
            "sdg":["Climate Action"]
        },
        "Community and Culture":{
            "green":["Circular Economy", "Natural Capital", "Just Transition", "Transformation"],
            "sdg":["Economic Growth", "Communities"]
        },
        "Economy":{
            "green":["Financing the Transition", "Circular Economy"],
            "sdg":["Economic Growth", "Consumption"]
        },
        "Energy":{
            "green":["Clean Energy", "Zero Pollution"],
            "sdg":["Clean Energy"]
        },
        "Environmental Quality":{
            "green":["Natural Capital", "Zero Pollution"],
            "sdg":["Life Water", "Clean Water"]
        },
        "Environment Quality":{
            "green":["Natural Capital", "Zero Pollution"],
            "sdg":["Life Water", "Clean Water"]
        },
        "Land-Use / Agriculture":{
            "green":["CAP", "Transformation", "Farm to Fork"],
            "sdg":["Life Land"]
        },
        "Land Use / Agriculture":{
            "green":["CAP", "Transformation", "Farm to Fork"],
            "sdg":["Life Land"]
        },
        "Research":{
            "green":["Circular Economy"],
            "sdg":["Consumption"]
        },
        "Research and Applied Sciences":{
            "green":["Circular Economy"],
            "sdg":["Consumption"]
        }
    };
    //https://www.compostnetwork.info/eu-green-deal/
    const greendeal_categories ={
        "Circular Economy":"Transition to a Circular Economy",
        "Zero Pollution":"A Zero Pollution Europe",
        "Farm to Fork":"Farm to Fork",
        "Transformation":"The Transformation of Agriculture and Rural Areas",
        "CAP":"Towards a Modernised and Simplified CAP",
        "Just Transition":"Leave No One Behind (Just Transition)",
        "Financing the Transition":"Financing the Transition",
        "Clean Energy":"Clean, Reliable, and Affordable Energy",
        "Climate":"Achieving Climate Neutrality",
        "Transport":"Sustainable Transport",
        "Natural Capital":"Preserving Europe's Natural Capital"
    };
    //https://sdgs.un.org/goals
    const sdg_categories={
        "Climate Action":"13 Climate Action",
        "Life Water":"14 Life below Water",
        "Consumption":"12 Responsible Consumption & Production",
        "Life Land":"15 Life on Land",
        "Clean Water":"6 Clean Water & Sanitation",
        "Clean Energy":"7 Affordable & Clean Energy",
        "Economic Growth":"8 Decent Work & Economic Growth",
        "Infrastructure":"9 Industry, Innovation & Infrastructure",
        "Communities":"11 Sustainable Cities & Communities"
    };

    // how to display policies
    function policyShow(policy, currentLang = 'English'){
        console.log(policy);
        const polPop = $('#policy_div');
        polPop.html('');

        // get the language of the policy
        var lang=policy['language'].split(" ");
        var lang_pol=lang[0];

        var pol_title_english = policy["name"];
        var pol_title_native = policy["name_language"];
        let pol_title_to_display = (currentLang === 'English') ? pol_title_english : pol_title_native;

        // categories html, gets all categories in their pill form
        var primary_category_english= pillNames[policy["primary_category"]];
        var primary_category_native=transl_categories[lang_pol][pillNames[policy["primary_category"]]];
        let primary_category_to_display = (currentLang === 'English') ? primary_category_english : primary_category_native;

        var categ_coll = [`<p class="badge rounded-pill ${ pillDct[policy["primary_category" ]] }" style="font-size:17px; font-weight:400;margin-bottom:5px;">${ primary_category_to_display}</p>`];
        var categ_lst = policy["category"].sort();
        if(categ_lst.length > 1){
            categ_coll.push(`|`);
        }
        for (let c=0; c < categ_lst.length; c++){
            if(categ_lst[c] != policy["primary_category"]){
                var category_native = transl_categories[lang_pol][pillNames[categ_lst[c]]];
                var category_english = pillNames[categ_lst[c]];
                let category_to_display = (currentLang === 'English') ? categ_lst[c] : category_native;
                categ_coll.push(`<p class="badge rounded-pill ${ pillDct[categ_lst[c]] }" style="font-size:17px; font-weight:400;margin-bottom:5px;">${ category_to_display }</p>`);
            }
        }
        var categs_html = categ_coll.join(" ");
        var green_goals =[];
        var sdgs = [];
        categ_lst.forEach(categ => {
            //green_goals.concat(policy_category_mappings[categ]["green"]);
            //sdgs.concat(policy_category_mappings[categ]["sdg"])
            var gr = policy_category_mappings[categ]["green"];
            var sd = policy_category_mappings[categ]["sdg"];
            gr.forEach(gr =>{
                green_goals.push(gr);
            });
            sd.forEach(sd =>{
                sdgs.push(sd);
            });
        });
        let green_uniq = new Set(green_goals.sort());
        let sdg_uniq = new Set(sdgs.sort());
        
        var green_coll = [];
        var sdg_coll = [];
        green_uniq.forEach(goal => {
            green_coll.push(`<p class="badge rounded-pill text-bg-secondary" style="font-size:14px; font-weight:400;margin-bottom:5px;">${ greendeal_categories[goal] }</p>`);
        });
        sdg_uniq.forEach(goal => {
            sdg_coll.push(`<p class="badge rounded-pill text-bg-secondary" style="font-size:14px; font-weight:400;margin-bottom:5px;">${ sdg_categories[goal] }</p>`);
        });
        var green_html = green_coll.join(" ");
        var sdg_html = sdg_coll.join(" ");

        // publishers html
        var publs_coll = [];
        policy["publisher"].forEach(publisher =>
                publs_coll.push(`<p class="d-inline">${publisher}</p>`)
            );
        var publs = publs_coll.join(`<br><p class="d-inline" style="font-size:16px">ğŸ‘¤</p><p class="d-inline">`);
        var publs_html = `<p class="d-inline publisher-icon" style="font-size:16px">ğŸ‘¤</p>${publs}`;
        
        let truncatedPublishers = '';
        let fullPublishers = '';
        const allPublishers = policy['publisher'];

        truncatedPublishers = `<span><p class="d-inline publisher-icon" style="font-size:16px">ğŸ‘¤</p><p class="d-inline">${allPublishers[0]}</p></span>`;
        fullPublishers=publs_html
        var publisher_section_html =`
            <span class="publisher-list-container">
                <span class="publisher-text truncated-version">${truncatedPublishers}</span>
                ${ allPublishers.length > 1 ? `<span class="ellipsis-placeholder">...</span>` : '' }
                <span class="publisher-text full-version hidden">
                    ${fullPublishers}
                </span>
                <button class="publisher-more-less-button hidden"></button>
            </span>
        `;

        // level / sublevel html, accounts for global and european, adds emojis
        var lvl_area_html = ``;

        var name_country_english= policy['country'];
        var name_country_native= '';
        let name_country_to_display = ''
        if(name_country_english){
            name_country_native= transl_countries[policy['country']][lang_pol];
            name_country_to_display = (currentLang === 'English') ? name_country_english : name_country_native;
        }
        var lvl_area_english= policy['policy_level'];
        var lvl_area_native= transl_scale[lang_pol][policy['policy_level']];
        let lvl_area_display = (currentLang === 'English') ? lvl_area_english : lvl_area_native;

        if(["European", "Global"].includes(policy['policy_level'])){
            lvl_area_html = `<p class="d-inline" style="font-size:20px">${ flagmojis[lvl_area_display] }</p> <p class="d-inline">${ lvl_area_display } </p>`;
        }else{
            if(policy["country"] in flagmojis){
                lvl_area_html = `<p class="d-inline" style="font-size:20px">${ flagmojis[name_country_english] }</p> <p class="d-inline" style="font-size:20px">${name_country_to_display} | ${ lvl_area_display } </p>`;
            }else{
                lvl_area_html = `<p style="font-size:20px"> ${ name_country_to_display } | ${ lvl_area_display } </p>`;
            }
        }

        // duration html, accounts for missing dates
        var duratn_html = ``;
        if(policy['year_from'] && policy['year_to']){
            duratn_html = `${policy['year_from']}-${policy['year_to']}`;
        }else{
            if(policy['year_from']){
                duratn_html = `${policy['year_from']}-`;
            }else if(policy['year_to']){
                duratn_html = `-${policy['year_to']}`;
            }
        }

        // excerpt html
        if (policy['excerpt_english']) {var excerpt_html_english = `<p class="excerpt-text" align="justify"> ${policy['excerpt_english']}</p>`;}
        if (policy['excerpt']) {var excerpt_html_native = `<p class="excerpt-text" align="justify"> ${policy['excerpt']}</p>`;}

        let excerpt_html_to_display = (currentLang === 'English') ? excerpt_html_english : excerpt_html_native;

        // try to split abstract by \n to retain line breaks?
        if (policy['abstract_english']) {
            var abst_sents_english = policy['abstract_english'].split("\n");
            var abst_ps_english = [];
            abst_sents_english.forEach(sentence =>
                abst_ps_english.push(`<p class="poltxt">${ sentence }</p>`)
            );
            var abst_html_english = abst_ps_english.join(`<p style="margin-bottom:10px;"></p>`);
            var abst_html_section_english = `<div>
                                        <h3 class="section-title-container"><div class="section-title-box">Overview</div></h3>
                                        <div style="margin-bottom:10px; font-size:16px" align="justify">
                                            ${ abst_html_english }
                                        </div>
                                    </div>`
        }
        if (policy['abstract']) {
            var abst_sents_native = policy['abstract'].split("\n");
            var abst_ps_native = [];
            abst_sents_native.forEach(sentence =>
                abst_ps_native.push(`<p class="poltxt">${ sentence }</p>`)
            );
            var abst_html_native = abst_ps_native.join(`<p style="margin-bottom:10px;"></p>`);
            var abst_html_section_native = `<div>
                                        <h3 class="section-title-container"><div class="section-title-box">${transl_overview[lang_pol]}</div></h3>
                                        <div style="margin-bottom:10px; font-size:16px" align="justify">
                                            ${ abst_html_native }
                                        </div>
                                    </div>`
        }

        let abst_html_section_to_display = (currentLang === 'English') ? abst_html_section_english : abst_html_section_native;

        // split table of contents by \n to retain line breaks
        var toc_html_english = ``;
        var toc_html_section_english = ``;
        if(policy['toc_english']){
            var toc_lines_english = policy['toc_english'].split("\n");
            var toc_ps_english = [];
            toc_lines_english.forEach(line =>
                toc_ps_english.push(`<p class="poltxt">${ line }</p>`)
            );
            toc_html_english = toc_ps_english.join(`<p style="margin-bottom:10px;"></p>`);
            toc_html_section_english = `<div>
                                    <h3 class="section-title-container"><div class="section-title-box">Table of Contents</div></h3>
                                    <div style="margin-bottom:20px">
                                        ${ toc_html_english }
                                    </div>
                                </div>`
        }

        var toc_html_native = ``;
        var toc_html_section_native = ``;
        if(policy['toc']){
            console.log(policy['toc']);
            var toc_lines_native = policy['toc'].split("\n");
            var toc_ps_native = [];
            toc_lines_native.forEach(line =>
                toc_ps_native.push(`<p class="poltxt">${ line }</p>`)
            );
            toc_html_native = toc_ps_native.join(`<p style="margin-bottom:10px;"></p>`);
            toc_html_section_native = `<div>
                                    <h3 class="section-title-container"><div class="section-title-box">${transl_toc[lang_pol]}</div></h3>
                                    <div style="margin-bottom:20px">
                                        ${ toc_html_native }
                                    </div>
                                </div>`
        }else{
            console.log("No TOC?");
        }

        let toc_html_section_to_display = (currentLang === 'English') ? toc_html_section_english : toc_html_section_native;
           
        // create button to switch between languages
        
        var button_native=`<button data-lang="native" class="btn btn-outline-dark hidden" style="font-size:14px" >${ flagmojis[policy['country']] } ${lang_pol}</button>`
        var button_english=`<button data-lang="english" class="btn btn-outline-dark hidden" style="font-size:14px" >${ flagmojis['United Kingdom'] } English</button>`
        
        // links
        var name_link_doc_english = 'Policy Document'
        var name_link_doc_native = transl_policy_document[lang_pol];
        let name_link_doc_to_display = (currentLang === 'English') ? name_link_doc_english : name_link_doc_native;

        var name_link_info_english = 'Official Site'
        var name_link_info_native = transl_policy_info_page[lang_pol];
        let name_link_info_to_display = (currentLang === 'English') ? name_link_info_english : name_link_info_native;

        var links_html = `<a href="${ policy['data_link'] }" class="polcol-lnk d-inline" target="_blank">
                        ${name_link_doc_to_display}
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
                            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"/>
                            <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"/>
                        </svg>
                    </a> | 
                    <a href="${ policy['documentation_link'] }" class="polcol-lnk d-inline" target="_blank">${name_link_info_to_display} â†—</a>`;

        // element to append to the policy           
        var element = `
                    <div style="display: flex; justify-content: flex-end; align-items: flex-start;margin-top:5px;">  
                        <div id="lang-btns">
                            ${button_native}
                            ${button_english}
                        </div>       
                    </div>
                    <h1 id="pol-res-he" class="policy-name-header">${pol_title_to_display}</h1>
                    <div>
                        ${lvl_area_html}
                        <p class="d-inline" style="font-size:20px"> | ${duratn_html} | </p> 
                        ${links_html}
                    </div> 
                    <div style="margin-top:3px">
                        ${ publisher_section_html }
                    </div>
                    <div style="display: flex; align-items: flex-start; gap: 20px;">
                        <div style="flex: 1; padding-right: 20px; min-width: 300px">
                            <div id="abstract-content">  
                                ${abst_html_section_to_display}
                            </div>
                            <div id="toc-content">        
                                ${toc_html_section_to_display}
                            </div>
                            <div style="margin-top:30px;">
                                Policy Categories: ${categs_html}
                            </div>  
                            <div style="margin-top:20px;">
                                Green Deal Goals: ${green_html}
                            </div>  
                            <div style="margin-top:20px;">
                                Sustainable Development Goals: ${sdg_html}
                            </div>  
                        </div>
                
                        <div class="right-content">
                            <div class="pdf-viewer-container">
                                <iframe src="${policy['data_link']}" class="pdf-iframe" align="center"></iframe>
                            </div>
                        </div>
                    </div>
                    
                    `;

        polPop.append(element);
        if(!policy){
            polPop.append(`<p class="text-center" style="color:black;">Policy not found.</p>`);
        }

        //
        const publisherListContainer = polPop.find('.publisher-list-container')[0];
        if (publisherListContainer) { 
            const allPublishers = policy['publisher'] || [];

            if (allPublishers.length > 1) { 
                const truncatedPublishersElement = publisherListContainer.querySelector('.publisher-text.truncated-version');
                const fullPublishersElement = publisherListContainer.querySelector('.publisher-text.full-version');
                const ellipsisPlaceholder = publisherListContainer.querySelector('.ellipsis-placeholder');
                const moreLessButton = publisherListContainer.querySelector('.publisher-more-less-button');

                moreLessButton.classList.remove('hidden');
                moreLessButton.textContent = 'More'; 
                ellipsisPlaceholder.classList.remove('hidden');

                moreLessButton.addEventListener('click', () => {
                    if (truncatedPublishersElement.classList.contains('hidden')) {
                        truncatedPublishersElement.classList.remove('hidden');
                        fullPublishersElement.classList.add('hidden');
                        ellipsisPlaceholder.classList.remove('hidden'); 
                        moreLessButton.textContent = 'More';
                    } else {
                        truncatedPublishersElement.classList.add('hidden');
                        fullPublishersElement.classList.remove('hidden');
                        ellipsisPlaceholder.classList.add('hidden'); 
                        moreLessButton.textContent = 'Less';
                    }
                });
            }
        }

        // add event listeners to the buttons
        if (lang_pol !== "English") {
            const button_english = document.querySelector('#lang-btns button[data-lang="english"]');
            button_english.classList.remove('hidden');
            const button_native = document.querySelector('#lang-btns button[data-lang="native"]');
            button_native.classList.remove('hidden');
            document.querySelectorAll('#lang-btns button').forEach(button => {
            button.addEventListener('click', () => {
                const lang = button.getAttribute('data-lang');
                policyShow(policy, lang); 
            });
        });  
        }
    }

    async function datafxn(pol_id){
        const url = `/sgpolicy/${pol_id}`;
        var pol_obj = {};
        try {
            const response = await fetch(url);
            if (!response.ok) {
            throw new Error(`Response status: ${response.status}`);
            }
            const json = await response.json();
            //console.log(json);
            pol_obj= json["result"]["policy"];
        } catch (error) {
            console.error(error.message);
        }
        policyShow(pol_obj, 'English')
        //
        //$('#policyliststore').val(JSON.stringify(polLst));
        //
        return pol_obj;
    }
    //policyShow(policy_obj, 'English');
    datafxn(pol_id);
</script>

{% endblock %}